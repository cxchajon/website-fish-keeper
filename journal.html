<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://thetankguide.com/assets/img/Logo-Master-1200x630.PNG" />
  <meta name="twitter:image:alt" content="The Tank Guide logo" />
  <meta property="og:image" content="https://thetankguide.com/assets/img/Logo-Master-1200x630.PNG" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="The Tank Guide logo" />
  <link rel="preload" href="/footer.html?v=1.5.2" as="fetch" crossorigin="anonymous">
  <meta charset="utf-8" />
  <meta property="og:site_name" content="The Tank Guide" />
  <!--#include virtual="/includes/schema-organization.html" -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tank Journal — Legal Pad</title>
  <meta name="description" content="Browse The Tank Guide’s legal-pad journal to review maintenance notes, water tests, and everyday aquarium observations." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://thetankguide.com/journal.html" />
  <script src="/js/nav.js?v=1.1.0" defer></script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="/css/style.css?v=2024-06-05a">
  <link rel="stylesheet" href="/css/site.css?v=1.5.2">
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Kalam:wght@300;400&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: light;
    }

    body {
      margin: 0;
      color: #2b2b2b;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(168, 196, 255, 0.45) 0px,
          rgba(168, 196, 255, 0.45) 1px,
          #fcf4d9 1px,
          #fcf4d9 40px
        ),
        #fcf4d9;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0 auto 0 18px;
      width: 2px;
      background: rgba(235, 87, 87, 0.7);
      pointer-events: none;
    }

    main.legalpad-page {
      max-width: 880px;
      margin: 48px auto 32px;
      padding: 0 24px 64px;
      display: block;
    }

    .legalpad-page h1 {
      margin: 0 0 8px;
      font-size: clamp(1.9rem, 2.5vw + 1.3rem, 2.6rem);
      font-weight: 700;
      letter-spacing: 0.015em;
    }

    .legalpad-page .intro-text {
      margin: 0 0 32px;
      max-width: 640px;
      color: rgba(43, 43, 43, 0.75);
      font-size: 1rem;
      line-height: 1.6;
    }

    /* scope to journal page only */
    main.legalpad-page { /* background provided by site; keep transparent */ }

    /* Remove all “card/panel” chrome inside journal area */
    .legalpad-page .entry,
    .legalpad-page .entry-card,
    .legalpad-page .panel,
    .legalpad-page .card {
      background: transparent !important;
      border: 0 !important;
      box-shadow: none !important;
      padding: 0 !important;
      margin: 0 0 28px 0 !important;
    }

    /* Handwriting for body text ONLY (keep site headings/nav with brand font) */
    .legalpad-page .entry-body,
    .legalpad-page .entry-body p,
    .legalpad-page .entry-body li {
      font-family: "Patrick Hand", "Kalam", system-ui, sans-serif;
      font-size: 20px;
      line-height: 1.9;
      letter-spacing: 0.15px;
      color: #252525;
      background: transparent;
    }

    /* Titles/meta keep brand font (NOT handwriting) */
    .legalpad-page h1,
    .legalpad-page h2,
    .legalpad-page .entry-title,
    .legalpad-page .entry-meta {
      font-family: inherit;
      background: transparent;
    }

    .legalpad-page .entry-title {
      font-size: clamp(1.25rem, 1vw + 1.2rem, 1.6rem);
      margin: 0 0 6px;
    }

    .legalpad-page .entry-meta {
      font-size: 0.95rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin: 0 0 12px;
      color: rgba(37, 37, 37, 0.65);
    }

    .legalpad-page .entry-body p {
      margin: 0 0 18px;
    }

    /* Journal images fit writing column and never overflow */
    .legalpad-page .entry-body img,
    .legalpad-page .journal-photo {
      display: block;
      max-width: 680px;
      width: 100%;
      height: auto;
      border-radius: 6px;
      margin: 12px 0 8px 0;
    }

    .journal-photos {
      margin: 0.5rem 0;
    }

    .journal-figure {
      margin: 0.75rem 0 1.25rem;
    }

    .journal-photo {
      width: 100%;
      height: auto;
      border-radius: 6px;
      display: block;
    }

    .journal-figcaption {
      font-size: 0.9rem;
      opacity: 0.85;
      margin-top: 0.25rem;
    }

    @media (max-width: 640px) {
      body::before {
        left: 12px;
      }

      main.legalpad-page {
        margin: 32px auto 24px;
        padding: 0 16px 56px;
      }

      .legalpad-page .entry-title {
        font-size: clamp(1.2rem, 2.4vw + 1rem, 1.4rem);
      }

      .legalpad-page .entry-meta {
        font-size: 0.85rem;
      }
    }
  </style>
  <!-- Google tag (gtag.js) — GA4 -->
  <!--#include virtual="/includes/ga4.html" -->
  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "YOUR_CLOUDFLARE_TOKEN"}'></script>
  <!-- End Cloudflare Web Analytics -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebPage",
        "@id": "https://thetankguide.com/journal.html#webpage",
        "url": "https://thetankguide.com/journal.html",
        "name": "Tank Journal — Legal Pad",
        "description": "Browse The Tank Guide’s legal-pad journal to review maintenance notes, water tests, and everyday aquarium observations.",
        "isPartOf": { "@id": "https://thetankguide.com/#website" },
        "publisher": { "@id": "https://thetankguide.com/#organization" }
      },
      {
        "@type": "BreadcrumbList",
        "@id": "https://thetankguide.com/journal.html#breadcrumb",
        "itemListElement": [
          { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://thetankguide.com/" },
          { "@type": "ListItem", "position": 2, "name": "Tank Journal", "item": "https://thetankguide.com/journal.html" }
        ]
      }
    ]
  }
  </script>
</head>
<body>
  <div id="site-nav"></div>
  <main id="journal" class="legalpad-page" aria-label="Tank Journal">
    <header>
      <h1>Tank Journal</h1>
      <p class="intro-text">Legal-pad view of recent entries. Newest on top.</p>
    </header>

    <div id="journal-entries" class="jp-list"></div>

    <article class="entry">
      <h2 class="entry-title">2025-11-09 | Maintenance</h2>
      <p class="entry-meta">Logged November 9, 2025</p>
      <div class="entry-body">
        <p>Pre-water-change nitrate tested at 40 ppm, prompting a deep clean with roughly 90% of the sump and 75% of the display refreshed.</p>
        <p>Installed a new poly-fil barrier to keep debris out of the pump chamber and maintain water clarity as the system settles post-maintenance.</p>
        <div class="journal-photos" aria-label="journal photos">
          <figure class="journal-figure">
            <img
              class="journal-photo"
              src="/assets/images/2025-11-09-sump-top-poly.jpg"
              alt="Top-down view of the sump after installing the new poly-fil barrier. Plants visible in the refugium section."
              loading="lazy"
              decoding="async"
            >
            <figcaption class="journal-figcaption">Top view — new poly-fil layer added above the refugium for debris control.</figcaption>
          </figure>
          <figure class="journal-figure">
            <img
              class="journal-photo"
              src="/assets/images/2025-11-09-sump-front-poly.jpg"
              alt="Front view showing the sump chambers with fresh poly-fil installed for mechanical filtration and flow clarity."
              loading="lazy"
              decoding="async"
            >
            <figcaption class="journal-figcaption">Front view — poly-fil barrier placed to prevent debris from reaching the pump chamber.</figcaption>
          </figure>
          <figure class="journal-figure">
            <img
              class="journal-photo"
              src="/assets/images/2025-11-09-sump-filled-poly.jpg"
              alt="Full sump setup showing all chambers after refill. Clear flow path and new filter media in place."
              loading="lazy"
              decoding="async"
            >
            <figcaption class="journal-figcaption">System refilled — flow restored and water clarity improving post-maintenance.</figcaption>
          </figure>
        </div>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-11-06 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged November 6, 2025</p>
      <div class="entry-body">
        <p>Nitrate measured at 20 ppm with the community fed flakes and brine shrimp alongside a spot dose of Seachem Excel.</p>
        <p>The last traces of BBA near the random flow generator have cleared, closing out the Post-Treatment Recovery Week on a high note.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-11-05 | Feeding &amp; Dosing</h2>
      <p class="entry-meta">Logged November 5, 2025</p>
      <div class="entry-body">
        <p>Fed flakes and bloodworms with a targeted spot dose of Seachem Excel to keep algae pressure light.</p>
        <p>Fish activity and appetite remain strong as the system holds steady through Post-Treatment Recovery Week.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-11-04 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged November 4, 2025</p>
      <div class="entry-body">
        <p>Nitrate tested under 5 ppm. Dosed four pumps of NilocG Thrive Plus and added a spot dose of Seachem Excel.</p>
        <p>Fed algae wafers with a pinch of flakes so every fish got a share, keeping nutrients low yet stable during Post-Treatment Recovery Week.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-11-03 | Feeding, Dosing &amp; Observation</h2>
      <p class="entry-meta">Logged November 3, 2025</p>
      <div class="entry-body">
        <p>Fed flakes and brine shrimp with two spot doses of Seachem Excel to keep BBA in check.</p>
        <p>Malaysian trumpet snails naturally polished the sump overflow screen, keeping debris away and signaling a “Natural Balance Discovery” milestone as the system self-regulates during Post-Treatment Recovery Week.</p>
        <img
          class="journal-photo"
          src="/assets/images/mts-on-strainer-2025-11-03.jpg"
          alt="Malaysian trumpet snails cleaning the overflow screen"
          loading="lazy"
        >
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-11-02 | Maintenance &amp; Dosing</h2>
      <p class="entry-meta">Logged November 2, 2025</p>
      <div class="entry-body">
        <p>Pre-water-change nitrate tested between 20–40 ppm (closer to 20). Completed roughly 95% sump and 70% display water changes with a light trim.</p>
        <p>Performed spot and cap doses of Seachem Excel as a routine post-change treatment and noted fresh plant growth emerging.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-10-31 | Feeding</h2>
      <p class="entry-meta">Logged October 31, 2025</p>
      <div class="entry-body">
        <p>Served a light portion of flakes only for the planned low-waste day while continuing Post-Treatment Recovery Week.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-10-30 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged October 30, 2025</p>
      <div class="entry-body">
        <p>Nitrate measured between 10–20 ppm (leaning closer to 20). Fed flakes and brine shrimp alongside spot and cap doses of Seachem Excel.</p>
        <p>Black beard algae around equipment has fully turned red, marking the start of Post-Treatment Recovery Week as the die-off phase takes hold.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-10-29 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged October 29, 2025</p>
      <div class="entry-body">
        <p>Nitrate came in at 10 ppm. Fed flakes and bloodworms, then spot and cap dosed Seachem Excel targeting remaining BBA near the random flow generator.</p>
        <p>Amano shrimp grazed in the treated area, showing renewed activity and signaling a recovering ecosystem.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-10-28 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged October 28, 2025</p>
      <div class="entry-body">
        <p>Fed three algae wafers and a small pinch of flakes to ensure the entire community ate. Nitrate registered at 5 ppm.</p>
        <p>Dosed four pumps of NilocG Thrive Plus. System remains stable and balanced following the recent maintenance cycle.</p>
      </div>
    </article>

    <article class="entry">
      <h2 class="entry-title">2025-10-27 | Feeding, Test &amp; Dosing</h2>
      <p class="entry-meta">Logged October 27, 2025</p>
      <div class="entry-body">
        <p>Nitrate tested at or below 5 ppm. Dosed one cap plus spot applications of Seachem Excel.</p>
        <p>Fed flakes and brine shrimp while the tank remained stable post-maintenance.</p>
      </div>
    </article>
  </main>

  <script src="/js/footer-loader.js?v=1.5.2" defer></script>
  <section class="legal-links" aria-label="Site legal links">
    <a href="/privacy-legal.html">Privacy Policy</a>
    <a href="/terms.html">Terms</a>
    <a href="/contact-feedback.html">Contact</a>
  </section>
  <noscript>
    <section class="legal-links" aria-label="Site legal links (noscript)">
      <a href="/privacy-legal.html">Privacy Policy</a>
      <a href="/terms.html">Terms</a>
      <a href="/contact-feedback.html">Contact</a>
    </section>
  </noscript>

  <div id="site-footer" data-footer-src="/footer.html?v=1.5.2"></div>

  <script>
    (function () {
      const container = document.getElementById('journal-entries');
      const log = (...args) => console.log('[Journal]', ...args);
      const error = (...args) => console.error('[Journal]', ...args);

      if (!container) {
        error('Missing #journal-entries container.');
        return;
      }

      const fallbackEntries = Array.from(document.querySelectorAll('#journal > .entry'));

      const clearFallbackEntries = () => {
        fallbackEntries.forEach((entry) => {
          if (entry.parentNode) {
            entry.parentNode.removeChild(entry);
          }
        });
      };

      const toLongDate = (value) => {
        if (!value) return '';
        const [year, month, day] = value.split('-').map(Number);
        if (!year || !month || !day) return value;
        const date = new Date(Date.UTC(year, month - 1, day));
        return date.toLocaleDateString(undefined, {
          month: 'long',
          day: 'numeric',
          year: 'numeric'
        });
      };

      const paragraphize = (parent, text) => {
        if (!text) return;
        String(text)
          .split(/\r?\n+/)
          .map((segment) => segment.trim())
          .filter(Boolean)
          .forEach((segment) => {
            const p = document.createElement('p');
            p.textContent = segment;
            parent.appendChild(p);
          });
      };

      const addPhotoFigure = (parent, photo) => {
        if (!photo || !photo.src) return;
        const figure = document.createElement('figure');
        figure.className = 'journal-figure';

        const img = document.createElement('img');
        img.className = 'journal-photo';
        img.src = photo.src;
        if (photo.alt) img.alt = photo.alt;
        img.loading = 'lazy';
        img.decoding = 'async';
        figure.appendChild(img);

        if (photo.caption) {
          const figcaption = document.createElement('figcaption');
          figcaption.className = 'journal-figcaption';
          figcaption.textContent = photo.caption;
          figure.appendChild(figcaption);
        }

        parent.appendChild(figure);
      };

      const createEntryElement = (entry) => {
        const article = document.createElement('article');
        article.className = 'entry';

        const titleParts = [];
        if (entry.date) titleParts.push(entry.date);
        if (entry.title) titleParts.push(entry.title);
        else if (entry.category) titleParts.push(entry.category);
        else if (entry.quickFacts) titleParts.push(entry.quickFacts);
        const title = document.createElement('h2');
        title.className = 'entry-title';
        title.textContent = titleParts.filter(Boolean).join(' | ') || 'Journal Entry';
        article.appendChild(title);

        const meta = document.createElement('p');
        meta.className = 'entry-meta';
        const pieces = [];
        if (entry.date) pieces.push(`Logged ${toLongDate(entry.date)}`);
        if (entry.time) pieces.push(entry.time);
        meta.textContent = pieces.filter(Boolean).join(' • ');
        if (!meta.textContent) meta.textContent = 'Journal details';
        article.appendChild(meta);

        const body = document.createElement('div');
        body.className = 'entry-body';

        if (entry.quickFacts) {
          const quickFacts = document.createElement('p');
          quickFacts.textContent = entry.quickFacts;
          body.appendChild(quickFacts);
        }

        paragraphize(body, entry.body);
        paragraphize(body, entry.ramble);
        paragraphize(body, entry.notes);
        paragraphize(body, entry.actionObservation);

        if (entry.nitrate || entry.dosing || entry.waterChange || entry.thrivePlus) {
          const details = document.createElement('p');
          const detailParts = [];
          if (entry.nitrate) detailParts.push(`Nitrate: ${entry.nitrate}`);
          if (entry.dosing) detailParts.push(`Dosing: ${entry.dosing}`);
          if (entry.thrivePlus) detailParts.push(`Thrive Plus: ${entry.thrivePlus}`);
          if (entry.waterChange) detailParts.push(`Water change: ${entry.waterChange}`);
          details.textContent = detailParts.join(' · ');
          body.appendChild(details);
        }

        const photos = Array.isArray(entry.photos) ? entry.photos : [];
        photos.forEach((photo) => addPhotoFigure(body, photo));

        if (entry.media && typeof entry.media === 'string') {
          addPhotoFigure(body, { src: entry.media, alt: entry.mediaAlt, caption: entry.mediaCaption });
        }

        if (entry.tags && entry.tags.length) {
          const tags = Array.isArray(entry.tags) ? entry.tags : String(entry.tags).split(',');
          const tagLine = document.createElement('p');
          tagLine.textContent = `Tags: ${tags.map((tag) => tag.trim()).filter(Boolean).join(', ')}`;
          body.appendChild(tagLine);
        }

        if (!body.children.length) {
          const fallback = document.createElement('p');
          fallback.textContent = 'No additional details provided.';
          body.appendChild(fallback);
        }

        article.appendChild(body);
        return article;
      };

      const renderEntries = (entries, source) => {
        if (!Array.isArray(entries) || !entries.length) {
          throw new Error('No entries available to render.');
        }
        clearFallbackEntries();
        container.innerHTML = '';
        entries.forEach((entry) => {
          container.appendChild(createEntryElement(entry));
        });
        log(`Rendered from ${source}:`, entries.length, 'entries');
        window.__journalLogs = window.__journalLogs || [];
        window.__journalLogs.push({ level: 'log', message: `Rendered from ${source}`, count: entries.length });
        window.__journalRenderedSource = source;
        window.__journalRenderedCount = entries.length;
      };

      const parseCsv = (text) => {
        const rows = [];
        let current = '';
        let row = [];
        let inQuotes = false;
        for (let i = 0; i < text.length; i += 1) {
          const char = text[i];
          if (char === '"') {
            if (inQuotes && text[i + 1] === '"') {
              current += '"';
              i += 1;
            } else {
              inQuotes = !inQuotes;
            }
          } else if (char === ',' && !inQuotes) {
            row.push(current);
            current = '';
          } else if ((char === '\n' || char === '\r') && !inQuotes) {
            if (char === '\r' && text[i + 1] === '\n') {
              i += 1;
            }
            row.push(current);
            rows.push(row);
            row = [];
            current = '';
          } else {
            current += char;
          }
        }
        if (current.length || row.length) {
          row.push(current);
          rows.push(row);
        }
        return rows
          .map((cols) => cols.map((col) => col.trim()))
          .filter((cols) => cols.some((col) => col));
      };

      const normalizeJsonEntries = (data) => {
        if (!Array.isArray(data)) return [];
        return data.map((item) => ({
          date: item.date || '',
          time: item.time || '',
          title: item.title || '',
          category: item.category || '',
          body: item.body || '',
          ramble: item.ramble || '',
          quickFacts: item.quick_facts || '',
          notes: item.notes || '',
          nitrate: item.nitrate_ppm || '',
          dosing: item.dosing || '',
          thrivePlus: item.thrive_plus || '',
          waterChange: item.water_change || '',
          tags: item.tags || '',
          photos: item.photos || [],
          media: item.media || '',
          mediaAlt: item.media_alt || '',
          mediaCaption: item.media_caption || ''
        }));
      };

      const normalizeCsvEntries = (text) => {
        const rows = parseCsv(text);
        if (!rows.length) return [];
        const headers = rows[0];
        const entries = rows.slice(1).map((cols) => {
          const record = {};
          headers.forEach((header, index) => {
            record[header] = cols[index] || '';
          });
          return {
            date: record['Date'] || '',
            time: record['Time'] || '',
            category: record['Category'] || '',
            actionObservation: record['Action/Observation'] || '',
            notes: record['Notes/Results'] || '',
            nitrate: record['Nitrate(ppm)'] || '',
            dosing: record['Dosing'] || '',
            thrivePlus: record['ThrivePlus(pumps)'] || '',
            waterChange: record['WaterChange'] || '',
            tags: record['tags'] || '',
            media: record['Image'] || ''
          };
        });
        return entries.filter((entry) => entry.date);
      };

      const sortEntries = (entries) => {
        return entries.slice().sort((a, b) => {
          if (a.date === b.date) return 0;
          return a.date > b.date ? -1 : 1;
        });
      };

      const fetchJsonEntries = async () => {
        const baseUrl = '/data/journal/2025-11.json';
        const jsonUrl = `${baseUrl}?cb=${Date.now()}`;
        const response = await fetch(jsonUrl, { cache: 'no-store' });
        if (!response.ok) {
          throw new Error(`JSON request failed with status ${response.status}`);
        }
        const data = await response.json();
        return sortEntries(normalizeJsonEntries(data));
      };

      const fetchCsvEntries = async () => {
        const baseUrl = '/data/journal.csv';
        const csvUrl = `${baseUrl}?cb=${Date.now()}`;
        const response = await fetch(csvUrl, { cache: 'no-store' });
        if (!response.ok) {
          throw new Error(`CSV request failed with status ${response.status}`);
        }
        const text = await response.text();
        return sortEntries(normalizeCsvEntries(text));
      };

      const showError = (message) => {
        container.innerHTML = '';
        const article = document.createElement('article');
        article.className = 'entry';

        const title = document.createElement('h2');
        title.className = 'entry-title';
        title.textContent = 'Journal temporarily unavailable';
        article.appendChild(title);

        const meta = document.createElement('p');
        meta.className = 'entry-meta';
        meta.textContent = 'Please try refreshing the page in a moment.';
        article.appendChild(meta);

        const body = document.createElement('div');
        body.className = 'entry-body';
        const p = document.createElement('p');
        p.textContent = message;
        body.appendChild(p);
        article.appendChild(body);

        container.appendChild(article);
      };

      const start = async () => {
        try {
          const jsonEntries = await fetchJsonEntries();
          renderEntries(jsonEntries, 'JSON');
        } catch (jsonError) {
          error('JSON fetch failed:', jsonError);
          try {
            const csvEntries = await fetchCsvEntries();
            renderEntries(csvEntries, 'CSV');
          } catch (csvError) {
            error('CSV fetch failed:', csvError);
            showError('We couldn\'t load the journal entries just now. They\'ll be back after a quick refresh.');
          }
        }
      };

      start();
    })();
  </script>
</body>
</html>
