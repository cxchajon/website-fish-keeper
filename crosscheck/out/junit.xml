<testsuite name="crosscheck" tests="8" failures="2">
    <testcase classname="crosscheck" name="Base bioload independent of filtration" />
    <testcase classname="crosscheck" name="Utilization decreases with additional filtration" />
    <testcase classname="crosscheck" name="Diminishing returns from stacking filters">
      <failure message="20g-bare-sponge_hob: Stacking filters should yield diminishing returns.
20g-planted-sponge_hob: Stacking filters should yield diminishing returns.
29g-bare-sponge_hob: Stacking filters should yield diminishing returns.
29g-planted-sponge_hob: Stacking filters should yield diminishing returns.
40g-bare-sponge_hob: Stacking filters should yield diminishing returns.
40g-planted-sponge_hob: Stacking filters should yield diminishing returns."><![CDATA[[
  {
    "scenario": "20g-bare-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (37.440%)",
    "got": "74.880%",
    "message": "Stacking filters should yield diminishing returns."
  },
  {
    "scenario": "20g-planted-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (33.696%)",
    "got": "67.392%",
    "message": "Stacking filters should yield diminishing returns."
  },
  {
    "scenario": "29g-bare-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (17.807%)",
    "got": "59.655%",
    "message": "Stacking filters should yield diminishing returns."
  },
  {
    "scenario": "29g-planted-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (16.027%)",
    "got": "53.689%",
    "message": "Stacking filters should yield diminishing returns."
  },
  {
    "scenario": "40g-bare-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (9.360%)",
    "got": "46.800%",
    "message": "Stacking filters should yield diminishing returns."
  },
  {
    "scenario": "40g-planted-sponge_hob",
    "check": "diminishing-returns",
    "expected": "Second improvement <= first (8.424%)",
    "got": "42.120%",
    "message": "Stacking filters should yield diminishing returns."
  }
]]]></failure>
    </testcase>
    <testcase classname="crosscheck" name="Custom filters follow same pipeline" />
    <testcase classname="crosscheck" name="Planted tanks provide modest relief" />
    <testcase classname="crosscheck" name="Filtration relief capped at 0.6" />
    <testcase classname="crosscheck" name="Turnover derated to delivered flow">
      <failure message="20g-bare-sponge80: Rated GPH is not derated before efficiency.
20g-bare-hob200: Rated GPH is not derated before efficiency.
20g-bare-canister300: Rated GPH is not derated before efficiency.
20g-bare-sponge_hob: Rated GPH is not derated before efficiency.
20g-bare-hob_hob: Rated GPH is not derated before efficiency.
20g-bare-hob_canister: Rated GPH is not derated before efficiency.
20g-bare-custom60: Rated GPH is not derated before efficiency.
20g-bare-custom120: Rated GPH is not derated before efficiency.
20g-bare-custom200: Rated GPH is not derated before efficiency.
20g-bare-product200_custom120: Rated GPH is not derated before efficiency.
20g-planted-sponge80: Rated GPH is not derated before efficiency.
20g-planted-hob200: Rated GPH is not derated before efficiency.
20g-planted-canister300: Rated GPH is not derated before efficiency.
20g-planted-sponge_hob: Rated GPH is not derated before efficiency.
20g-planted-hob_hob: Rated GPH is not derated before efficiency.
20g-planted-hob_canister: Rated GPH is not derated before efficiency.
20g-planted-custom60: Rated GPH is not derated before efficiency.
20g-planted-custom120: Rated GPH is not derated before efficiency.
20g-planted-custom200: Rated GPH is not derated before efficiency.
20g-planted-product200_custom120: Rated GPH is not derated before efficiency.
29g-bare-sponge80: Rated GPH is not derated before efficiency.
29g-bare-hob200: Rated GPH is not derated before efficiency.
29g-bare-canister300: Rated GPH is not derated before efficiency.
29g-bare-sponge_hob: Rated GPH is not derated before efficiency.
29g-bare-hob_hob: Rated GPH is not derated before efficiency.
29g-bare-hob_canister: Rated GPH is not derated before efficiency.
29g-bare-custom60: Rated GPH is not derated before efficiency.
29g-bare-custom120: Rated GPH is not derated before efficiency.
29g-bare-custom200: Rated GPH is not derated before efficiency.
29g-bare-product200_custom120: Rated GPH is not derated before efficiency.
29g-planted-sponge80: Rated GPH is not derated before efficiency.
29g-planted-hob200: Rated GPH is not derated before efficiency.
29g-planted-canister300: Rated GPH is not derated before efficiency.
29g-planted-sponge_hob: Rated GPH is not derated before efficiency.
29g-planted-hob_hob: Rated GPH is not derated before efficiency.
29g-planted-hob_canister: Rated GPH is not derated before efficiency.
29g-planted-custom60: Rated GPH is not derated before efficiency.
29g-planted-custom120: Rated GPH is not derated before efficiency.
29g-planted-custom200: Rated GPH is not derated before efficiency.
29g-planted-product200_custom120: Rated GPH is not derated before efficiency.
40g-bare-sponge80: Rated GPH is not derated before efficiency.
40g-bare-hob200: Rated GPH is not derated before efficiency.
40g-bare-canister300: Rated GPH is not derated before efficiency.
40g-bare-sponge_hob: Rated GPH is not derated before efficiency.
40g-bare-hob_hob: Rated GPH is not derated before efficiency.
40g-bare-hob_canister: Rated GPH is not derated before efficiency.
40g-bare-custom60: Rated GPH is not derated before efficiency.
40g-bare-custom120: Rated GPH is not derated before efficiency.
40g-bare-custom200: Rated GPH is not derated before efficiency.
40g-bare-product200_custom120: Rated GPH is not derated before efficiency.
40g-planted-sponge80: Rated GPH is not derated before efficiency.
40g-planted-hob200: Rated GPH is not derated before efficiency.
40g-planted-canister300: Rated GPH is not derated before efficiency.
40g-planted-sponge_hob: Rated GPH is not derated before efficiency.
40g-planted-hob_hob: Rated GPH is not derated before efficiency.
40g-planted-hob_canister: Rated GPH is not derated before efficiency.
40g-planted-custom60: Rated GPH is not derated before efficiency.
40g-planted-custom120: Rated GPH is not derated before efficiency.
40g-planted-custom200: Rated GPH is not derated before efficiency.
40g-planted-product200_custom120: Rated GPH is not derated before efficiency."><![CDATA[[
  {
    "scenario": "20g-bare-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-bare-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "20g-planted-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-bare-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "29g-planted-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-bare-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-sponge80",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-hob200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-canister300",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-sponge_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-hob_hob",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-hob_canister",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-custom60",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-custom200",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  },
  {
    "scenario": "40g-planted-product200_custom120",
    "check": "turnover-derate",
    "expected": "Total flow ≈ 65% of rated GPH",
    "got": "ratio=1.000",
    "message": "Rated GPH is not derated before efficiency."
  }
]]]></failure>
    </testcase>
    <testcase classname="crosscheck" name="Combined relief uses multiplicative aggregation" />
</testsuite>
