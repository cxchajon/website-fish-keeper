<script async src="https://www.googletagmanager.com/gtag/js?id=G-508286504"></script>
<script>
  (function(){
    var SNIPPET_PATH = '/includes/ga4.html';
    window.__TTG_GA4_PATH__ = window.__TTG_GA4_PATH__ || SNIPPET_PATH;
    window.__TTG_GA4_PRESENT__ = true;
    window.dataLayer = window.dataLayer || [];
    window.gtag = window.gtag || function gtag(){ dataLayer.push(arguments); };

    var defaultConsent = {
      'ad_storage': 'denied',
      'analytics_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'wait_for_update': 500
    };

    gtag('consent', 'default', defaultConsent);

    var pendingUpdates = window.__ttgDeferredConsentUpdates__;
    if (Array.isArray(pendingUpdates) && pendingUpdates.length){
      pendingUpdates.splice(0).forEach(function(state){
        gtag('consent', 'update', state);
      });
    }

    gtag('js', new Date());
    gtag('config', 'G-508286504', { 'send_page_view': false });

    window.__TTG_GA4_READY__ = true;
    window.dispatchEvent(new CustomEvent('ttg-ga4-ready'));

    (function(){
      var sent = false;
      function trySend(){
        if (sent) return;
        var state = window.__TTG_CONSENT_STATE__ || {};
        if (state.analytics_storage === 'granted'){
          sent = true;
          gtag('event', 'page_view');
        }
      }
      window.addEventListener('ttg-consent-updated', trySend);
      document.addEventListener('DOMContentLoaded', trySend);
      trySend();
    })();
  })();
</script>
