<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KTRVCMQN');</script>
  <!-- End Google Tag Manager -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta name="twitter:image:alt" content="FishKeepingLifeCo logo (1200√ó630)." />
  <meta property="og:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="FishKeepingLifeCo logo (1200√ó630)." />
  <meta property="og:type" content="website" />
  <link rel="preload" href="/footer.html?v=1.5.2" as="fetch" crossorigin="anonymous">
  <meta charset="UTF-8" />
  <meta property="og:site_name" content="The Tank Guide" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feature Your Tank ‚Äî The Tank Guide</title>
  <meta name="description" content="Submit your aquarium‚Äôs Quick Facts to be featured on The Tank Guide: size, stock, substrate, filtration, lighting, and more." />
  <meta name="robots" content="index,follow" />
  <meta property="og:title" content="Feature Your Tank ‚Äî The Tank Guide" />
  <meta property="og:description" content="Submit your aquarium‚Äôs Quick Facts to be featured on The Tank Guide: size, stock, substrate, filtration, lighting, and more." />
  <meta property="og:url" content="https://thetankguide.com/feature-your-tank.html" />
  <meta name="twitter:title" content="Feature Your Tank ‚Äî The Tank Guide" />
  <meta name="twitter:description" content="Submit your aquarium‚Äôs Quick Facts to be featured on The Tank Guide: size, stock, substrate, filtration, lighting, and more." />
  <meta name="twitter:url" content="https://thetankguide.com/feature-your-tank.html" />
  <link rel="canonical" href="https://thetankguide.com/feature-your-tank.html">
  <link rel="preconnect" href="https://pagead2.googlesyndication.com">
  <link rel="preconnect" href="https://fundingchoicesmessages.google.com">
  <link rel="preconnect" href="https://static.cloudflareinsights.com">
  <link rel="preconnect" href="https://widget.cloudinary.com">
  <link rel="stylesheet" href="css/style.css?v=1.0.10" />
  <style>
    body.page-gradient {
      min-height: 100vh;
      background: radial-gradient(circle at 20% 20%, rgba(54, 83, 180, 0.18), transparent 38%),
        radial-gradient(circle at 80% 0%, rgba(29, 185, 138, 0.18), transparent 32%),
        linear-gradient(180deg, #0b0f12 0%, #111820 60%, #101418 100%);
      color: #e9f0fb;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background-attachment: fixed;
    }

    .feature-main {
      max-width: 960px;
      margin: 0 auto;
      padding: 40px 16px 96px;
    }

    .panel {
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 18px;
      padding: 32px 28px 40px;
      box-shadow: 0 28px 60px rgba(0, 0, 0, 0.35);
    }

    .panel h1 {
      margin: 0;
      font-size: clamp(2rem, 2.4vw + 1rem, 3rem);
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .divider {
      height: 1px;
      background: linear-gradient(90deg, rgba(192, 192, 192, 0.6), rgba(192, 192, 192, 0.2));
      margin: 12px 0 20px;
    }

    .tiny {
      font-size: 0.92rem;
      line-height: 1.6;
      margin: 0;
      color: rgba(233, 240, 251, 0.85);
    }

    #feature-tank-form.ft-wrap {
      --border: rgba(255, 255, 255, 0.12);
      --muted: #a1a1aa;
      --text: #f3f4f6;
      --accent: #10b981;
      --accent-weak: rgba(16, 185, 129, 0.35);
      color: var(--text);
    }

    #feature-tank-form {
      margin-top: 24px;
    }

    .ft-field {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin: 14px 0;
    }

    .ft-label {
      font-weight: 600;
      color: rgba(241, 246, 255, 0.9);
      display: block;
      margin-bottom: 6px;
    }

    .ft-title {
      margin: 0 0 12px;
      font-size: 1.4rem;
    }

    .ft-input,
    textarea.ft-input,
    select.ft-input,
    textarea.urls-readonly {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border, rgba(255, 255, 255, 0.18));
      background: rgba(6, 10, 16, 0.65);
      color: var(--text, #f4f8ff);
      font-size: 1rem;
      transition: border-color 0.18s ease, box-shadow 0.18s ease;
    }

    .feature-main ::placeholder {
      color: rgba(244, 248, 255, 0.75);
    }

    .ft-input:focus,
    textarea.ft-input:focus,
    select.ft-input:focus,
    textarea.urls-readonly:focus {
      outline: none;
      border-color: rgba(118, 198, 255, 0.8);
      box-shadow: 0 0 0 3px rgba(118, 198, 255, 0.25);
    }

    .ft-grid,
    .grid-2,
    .grid-3 {
      display: grid;
      gap: 10px;
    }

    .grid-2 { grid-template-columns: 1fr 1fr; }
    .grid-3 { grid-template-columns: 1fr 1fr 1fr; }

    .ft-help {
      color: var(--muted, #a1a1aa);
      margin-top: 6px;
    }

    .ft-help.small { font-size: 0.9rem; }

    textarea.ft-input { resize: vertical; min-height: 120px; }

    .eligibility-note {
      margin: 12px 0 14px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border, rgba(255, 255, 255, 0.12));
      background: rgba(255, 255, 255, 0.06);
    }

    .eligibility-note h2 { margin: 0 0 8px; font-size: 1.15rem; }
    .eligibility-note ul { margin: 8px 0 0 18px; padding: 0; }
    .eligibility-note li { margin: 6px 0; line-height: 1.35; }

    .channel-wrap { margin: 12px 0 6px; }
    .channel-title { display: block; margin-bottom: 8px; font-weight: 600; }

    .channel-row {
      display: grid;
      grid-template-columns: 160px 1fr;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }

    .channel-select,
    .channel-handle {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border, rgba(255, 255, 255, 0.18));
      background: rgba(255, 255, 255, 0.05);
      color: var(--text, #f3f4f6);
      width: 100%;
    }

    .field-note {
      display: block;
      margin-top: 6px;
      color: var(--muted, #a1a1aa);
      font-size: 0.9rem;
    }

    .upload-card {
      margin: 16px 0;
      padding: 14px;
      border: 1px dashed var(--border, rgba(255, 255, 255, 0.12));
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.03);
    }

    .upload-head h3 { margin: 0 0 4px; font-size: 1.1rem; }
    .muted { color: var(--muted, #a1a1aa); }

    .upload-actions {
      display: flex;
      gap: 10px;
      margin: 10px 0 12px;
      flex-wrap: wrap;
    }

    .btn-primary,
    .btn-ghost {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--border, rgba(255, 255, 255, 0.12));
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.12s ease;
    }

    .btn-primary {
      background: linear-gradient(180deg, rgba(16, 185, 129, 0.18), rgba(16, 185, 129, 0.08));
      color: var(--text, #f3f4f6);
      font-weight: 600;
      letter-spacing: 0.2px;
    }

    .btn-ghost { background: transparent; color: var(--muted, #a1a1aa); }
    .btn-primary:active,
    .btn-ghost:active { transform: translateY(1px); box-shadow: 0 6px 14px rgba(0,0,0,0.16); }

    .upload-preview {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
      gap: 10px;
      min-height: 0;
    }

    .thumb {
      border: 1px solid var(--border, rgba(255, 255, 255, 0.12));
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      aspect-ratio: 1 / 1;
      display: grid;
      place-items: center;
      font-size: 0.8rem;
      background: rgba(255, 255, 255, 0.04);
    }

    .thumb img,
    .thumb video { width: 100%; height: 100%; object-fit: cover; display: block; }

    .thumb .badge {
      position: absolute;
      bottom: 6px;
      right: 6px;
      background: rgba(0, 0, 0, 0.55);
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.7rem;
    }

    .consent-row {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 12px;
      align-items: start;
      margin: 12px 0 6px;
    }

    .consent-checkbox {
      width: 20px;
      height: 20px;
      margin-top: 2px;
      -webkit-appearance: checkbox;
      appearance: checkbox;
      accent-color: var(--accent, #10b981);
      transform: scale(1.15);
      transform-origin: top left;
      cursor: pointer;
    }

    .consent-label { user-select: none; cursor: pointer; line-height: 1.4; }
    .consent-help { color: var(--muted, #a1a1aa); margin: 0 0 10px; }

    #submitBtn[disabled] { opacity: 0.5; cursor: not-allowed; }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .feature-faq {
      margin-top: 24px;
      padding: 18px 14px 8px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.03);
    }

    .feature-faq h2 { margin: 0 0 8px; font-size: 1.25rem; }

    @media (max-width: 720px) {
      .panel { padding: 28px 22px 36px; }
      .feature-main { padding-top: 32px; }
      .upload-actions { flex-direction: column; align-items: stretch; }
      .btn-primary,
      .btn-ghost { width: 100%; text-align: center; }
    }

    @media (max-width: 680px) {
      .grid-2,
      .grid-3 { grid-template-columns: 1fr; }
    }

    @media (max-width: 480px) { .channel-row { grid-template-columns: 1fr; } }
  </style>
  <script defer src="js/nav.js?v=1.1.0"></script>
  <!-- Consent Mode defaults (runs after GA loader) -->
  <script src="/assets/js/consent-mode.js" defer></script>

  <!-- AdSense loader (keep one global instance only) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9905718149811880"
    crossorigin="anonymous"></script>
  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "fef22cbf19e3473db5ec987a8f3bf4f3"}'></script>
  <!-- End Cloudflare Web Analytics -->
  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <script>
    // IAB TCF v2.2 stub to allow __tcfapi interactions
    (function() {
      var TCF_LOCATOR_NAME = '__tcfapiLocator';
      var queue = [];
      var win = window;
      var cmpFrame;

      function addFrame() {
        if (!win.frames[TCF_LOCATOR_NAME]) {
          if (document.body) {
            cmpFrame = document.createElement('iframe');
            cmpFrame.style.cssText = 'display:none';
            cmpFrame.name = TCF_LOCATOR_NAME;
            document.body.appendChild(cmpFrame);
          } else {
            setTimeout(addFrame, 5);
          }
        }
      }

      function tcfAPIHandler() {
        var gdprApplies;
        var args = arguments;

        if (!args.length) {
          return queue;
        }

        if (args[0] === 'setGdprApplies') {
          gdprApplies = args[1];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        } else if (args[0] === 'ping') {
          var retr = {
            gdprApplies: gdprApplies,
            cmpLoaded: false,
            cmpStatus: 'stub'
          };
          if (typeof args[2] === 'function') {
            args[2](retr);
          }
        } else {
          queue.push(args);
        }
      }

      function postMessageEventHandler(event) {
        var msgIsString = typeof event.data === 'string';
        var json = {};

        try {
          json = msgIsString ? JSON.parse(event.data) : event.data;
        } catch (ignore) {}

        var payload = json.__tcfapiCall;

        if (payload) {
          window.__tcfapi(payload.command, payload.version, function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            event.source.postMessage(returnMsg, '*');
          }, payload.parameter);
        }
      }

      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    })();
  </script>
  <script defer src="/assets/js/ttg-cmp-consent-bridge.js"></script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>
<body class="page-gradient">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTRVCMQN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <a href="#feature-main" class="skip-link">Skip to main content</a>
  <div id="site-nav"></div>

  <main class="feature-main" id="feature-main">
    <section class="panel" aria-labelledby="feature-tank-title">
      <h1 id="feature-tank-title">Feature Your Tank ‚Äî Quick Facts</h1>
      <div class="divider" aria-hidden="true"></div>
      <p class="tiny" style="opacity:.9;">
        Want your setup featured on <strong>The Tank Guide</strong>? Fill out the Quick Facts below.
        We‚Äôll review submissions and reach out if selected.<br>
        <em>Features are only accepted through this website form.</em>
      </p>

      <section id="feature-tank-form" class="ft-wrap" aria-labelledby="ft-title">
        <h2 id="ft-title" class="ft-title">Feature Your Tank</h2>

        <form id="featureForm" action="https://formspree.io/f/xnngnwld" method="POST" novalidate>
          <!-- ===== BASICS (keep minimal) ===== -->
          <div class="grid-2">
            <div class="ft-field">
              <label for="name" class="ft-label">Name</label>
              <input id="name" name="name" type="text" class="ft-input" placeholder="Your name" required />
            </div>
            <div class="ft-field">
              <label for="email" class="ft-label">Email</label>
              <input id="email" name="email" type="email" class="ft-input" placeholder="you@example.com" required />
            </div>
          </div>

          <!-- ===== ELIGIBILITY NOTICE ===== -->
          <aside class="eligibility-note" aria-labelledby="eligibility-heading" role="note">
            <h2 id="eligibility-heading">Eligibility</h2>
            <ul>
              <li>You must be subscribed to our <strong>YouTube channel (@FishKeepingLifeCo)</strong> AND follow at least one other social (Instagram or TikTok).</li>
              <li>Provide your actual account handle(s) so we can verify before approval.</li>
              <li>If selected, post a story or short mention announcing your upcoming feature and <strong>tag @FishKeepingLifeCo</strong>. We‚Äôll provide official hashtags to include.</li>
              <li>When your feature goes live, we‚Äôll add it to our website and socials. You agree to let us tag you and keep handles taggable/visible.</li>
            </ul>
          </aside>

          <!-- ===== SOCIALS (YouTube + one other required) ===== -->
          <div id="socials-block" class="channel-wrap">
            <label class="channel-title">Social Media (YouTube + one other required)</label>

            <!-- Row 1 (REQUIRED) -->
            <div class="channel-row" data-row="1">
              <select class="channel-select" aria-label="Platform (required)">
                <option value="YouTube" selected>YouTube</option>
                <option value="Instagram">Instagram</option>
                <option value="TikTok">TikTok</option>
                <option value="Facebook">Facebook</option>
                <option value="Other">Other</option>
              </select>
              <input class="channel-handle" type="url" inputmode="url"
                     placeholder="e.g., @YourChannel or full URL"
                     aria-label="Handle or URL (required)" required>
            </div>

            <!-- Row 2 (OPTIONAL) -->
            <div class="channel-row" data-row="2">
              <select class="channel-select" aria-label="Platform (optional)">
                <option value="" selected disabled>Choose platform (optional)</option>
                <option value="YouTube">YouTube</option>
                <option value="Instagram">Instagram</option>
                <option value="TikTok">TikTok</option>
                <option value="Facebook">Facebook</option>
                <option value="Other">Other</option>
              </select>
              <input class="channel-handle" type="url" inputmode="url"
                     placeholder="e.g., @YourHandle or full URL"
                     aria-label="Handle or URL (optional)">
            </div>

            <!-- Row 3 (OPTIONAL) -->
            <div class="channel-row" data-row="3">
              <select class="channel-select" aria-label="Platform (optional)">
                <option value="" selected disabled>Choose platform (optional)</option>
                <option value="YouTube">YouTube</option>
                <option value="Instagram">Instagram</option>
                <option value="TikTok">TikTok</option>
                <option value="Facebook">Facebook</option>
                <option value="Other">Other</option>
              </select>
              <input class="channel-handle" type="url" inputmode="url"
                     placeholder="e.g., @YourHandle or full URL"
                     aria-label="Handle or URL (optional)">
            </div>

            <small class="field-note">
              Paste a full profile URL or just your handle. We‚Äôll normalize it. Eligibility requires <strong>YouTube + Instagram or TikTok</strong>.
            </small>

            <!-- Hidden structured payload for Formspree -->
            <input type="hidden" name="socials_structured" id="socialsStructured" value="">
          </div>

          <!-- ===== TANK BASICS (condensed) ===== -->
          <div class="grid-3">
            <div class="ft-field">
              <label for="tank_size" class="ft-label">Tank Size</label>
              <input id="tank_size" name="tank_size" type="text" class="ft-input" placeholder="e.g., 29G" />
            </div>
            <div class="ft-field">
              <label for="planted" class="ft-label">Planted?</label>
              <select id="planted" name="planted" class="ft-input">
                <option value="Yes">Yes</option>
                <option value="No">No</option>
                <option value="Low-tech">Low-tech</option>
                <option value="High-tech">High-tech</option>
              </select>
            </div>
            <div class="ft-field">
              <label for="filtration" class="ft-label">Filtration</label>
              <input id="filtration" name="filtration" type="text" class="ft-input" placeholder="e.g., canister + sponge" />
            </div>
          </div>

          <div class="ft-field">
            <label for="livestock" class="ft-label">Livestock & Cleanup Crew</label>
            <textarea id="livestock" name="livestock" class="ft-input" rows="3" placeholder="List your fish, inverts, and cleanup crew‚Ä¶"></textarea>
          </div>

          <div class="ft-field">
            <label for="notes" class="ft-label">Other Notes (optional)</label>
            <textarea id="notes" name="notes" class="ft-input" rows="3" placeholder="What you love, what you‚Äôd improve, anything we should know‚Ä¶"></textarea>
          </div>

          <!-- ===== DIRECT UPLOADS ‚Äî Cloudinary ===== -->
          <div id="media-upload-block" class="upload-card" aria-labelledby="upload-title">
            <div class="upload-head">
              <h3 id="upload-title">Upload Photos / Videos</h3>
              <p class="muted">Attach images or short clips from your device. Files are hosted securely via Cloudinary.</p>
            </div>

            <div class="upload-actions">
              <button type="button" id="openUploader" class="btn-primary">+ Add Photos/Videos</button>
              <button type="button" id="clearUploads" class="btn-ghost">Clear</button>
            </div>

            <!-- Hidden fields sent to Formspree -->
            <input type="hidden" name="media_urls" id="mediaUrls" value="" />
            <input type="hidden" name="media_playable_urls" id="mediaPlayableUrls" value="" />
            <input type="hidden" name="media_preview_urls" id="mediaPreviewUrls" value="" />

            <!-- Optional: show users the originals list -->
            <label for="mediaUrlsReadonly" class="sr-only">Uploaded URLs</label>
            <textarea id="mediaUrlsReadonly" class="urls-readonly ft-input" rows="3" readonly
              placeholder="No files uploaded yet."></textarea>

            <!-- Preview grid -->
            <div id="uploadPreview" class="upload-preview" aria-live="polite"></div>

            <div class="ft-help small">Max 10 files, up to ~80 MB each. Allowed: jpg, jpeg, png, webp, heic, mp4, mov.</div>
          </div>

          <!-- ===== CONSENT ===== -->
          <div class="consent-row">
            <input type="checkbox" id="ownMedia" name="own_media" value="yes" class="consent-checkbox" aria-describedby="consent-help" />
            <label for="ownMedia" class="consent-label">
              I confirm I own these photos/videos and give <strong>The Tank Guide</strong> permission to showcase them (with credit).
            </label>
          </div>
          <p id="consent-help" class="consent-help">
            Tick this box to enable submission and let us share your media with credit.
          </p>
          <div class="consent-row">
            <input type="checkbox" id="feature-permission-contact" name="permission_contact" value="yes" class="consent-checkbox" aria-describedby="feature-contact-help" required />
            <label for="feature-permission-contact" class="consent-label">
              I consent to being contacted about this tank submission. <strong>(Required)</strong>
            </label>
          </div>
          <p id="feature-contact-help" class="consent-help">
            We‚Äôll only use your email to follow up about this feature or ask clarifying questions.
          </p>
          <div class="consent-row">
            <input type="checkbox" id="feature-permission-newsletter" name="permission_newsletter" value="yes" class="consent-checkbox" aria-describedby="feature-newsletter-help" />
            <label for="feature-permission-newsletter" class="consent-label">
              Yes, I‚Äôd like occasional email updates about new guides, tools, and books from FishKeepingLifeCo &amp; The Tank Guide.
            </label>
          </div>
          <p id="feature-newsletter-help" class="consent-help">
            No spam ‚Äî just important updates. You can unsubscribe anytime.
          </p>

          <!-- ===== SUBMIT ===== -->
          <button type="submit" id="submitBtn" class="btn-primary" disabled aria-disabled="true">Submit Tank</button>
        </form>

        <!-- Inline thank-you message -->
        <div id="thankYou" style="display:none; margin-top:1rem; color:#10b981; font-weight:600;">
          ‚úÖ Thanks! Your submission has been sent. We‚Äôll review and contact you if selected.
        </div>
        <div id="errorMessage" role="alert" style="display:none; margin-top:0.75rem; color:#f87171; font-weight:600;"></div>
      </section>

        <script src="https://widget.cloudinary.com/v2.0/global/all.js" id="cloudinary-widget-script"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
        // ======= Config (Cloudinary + limits) =======
        const CLOUD_NAME = 'fishkeepinglifeco';
        const UPLOAD_PRESET = 'ttg_unsigned';
        const UPLOAD_FOLDER = 'feature-tanks';
        const MAX_FILES = 10;
        const MAX_SIZE_BYTES = 80 * 1024 * 1024; // 80 MB

        // ======= Elements =======
        const form = document.getElementById('featureForm');
        const thankYou = document.getElementById('thankYou');
        const submitBtn = document.getElementById('submitBtn');
        const consent = document.getElementById('ownMedia');

        const socialsBlock = document.getElementById('socials-block');
        const socialsStructured = document.getElementById('socialsStructured');

        const openUploaderBtn = document.getElementById('openUploader');
        const clearUploadsBtn = document.getElementById('clearUploads');
        const preview = document.getElementById('uploadPreview');
        const urlsHidden = document.getElementById('mediaUrls');
        const playableHidden = document.getElementById('mediaPlayableUrls');
        const previewsHidden = document.getElementById('mediaPreviewUrls');
        const urlsReadonly = document.getElementById('mediaUrlsReadonly');
        const errorBox = document.getElementById('errorMessage');
        const contactConsent = document.getElementById('feature-permission-contact');

        if (!form || !submitBtn || !consent || !contactConsent) {
          return;
        }

        // ======= State =======
        let uploaded = [];   // originals (secure_url)
        let playable = [];   // safe-to-play links
        let previews = [];   // thumbnails/posters
        let uploadsInFlight = 0;
        let widgetInstance = null;

        function buildWidget() {
          if (widgetInstance) return true;
          if (!(window.cloudinary && typeof window.cloudinary.createUploadWidget === 'function')) {
            return false;
          }

          widgetInstance = cloudinary.createUploadWidget({
            cloudName: CLOUD_NAME,
            uploadPreset: UPLOAD_PRESET,
            multiple: true,
            maxFiles: MAX_FILES,
            // Allow both generic types and explicit extensions (some devices report generically)
            clientAllowedFormats: ['image','video','jpg','jpeg','png','webp','heic','mp4','mov'],
            maxFileSize: MAX_SIZE_BYTES,
            resourceType: 'auto',
            cropping: false,
            folder: UPLOAD_FOLDER,
            sources: ['local', 'camera', 'url'],
            showPoweredBy: false
          }, (error, result) => {
            if (result && result.event === 'queues-start') {
              lockSubmitWhileUploading(true);
            }

            if (result && result.event === 'success') {
              const info = result.info || {};
              const url = info && info.secure_url ? info.secure_url : null;
              if (url) {
                if (uploaded.length >= MAX_FILES) {
                  alert(`You can upload up to ${MAX_FILES} files per submission.`);
                } else {
                  uploaded.push(url);
                  playable.push(makePlayableUrl(url));
                  previews.push(makePreviewUrl(url));
                  renderPreviews();
                }
              }
            }

            if (result && (result.event === 'queues-end' || result.event === 'close')) {
              lockSubmitWhileUploading(false);
            }

            if (error) {
              console.error('Cloudinary widget error:', error);
              const code = (error && (error.statusText || error.message || error.http_code)) || 'unknown';
              if (/max file size/i.test(code) || error.http_code === 400) {
                alert('Your video is too large. Please keep files at or under ~80 MB.');
              } else if (/invalid format/i.test(code)) {
                alert('Unsupported format. Allowed: jpg, jpeg, png, webp, heic, mp4, mov.');
              } else {
                alert('There was a problem uploading. Please try again.');
              }
              lockSubmitWhileUploading(false);
            }
          });

          console.log('Cloudinary widget initialized successfully.');
          return true;
        }

        // ======= Helpers: Socials =======
        function normHandle(val){
          if (!val) return '';
          let v = ('' + val).trim();
          v = v.replace(/\s+/g, '');
          if (/^https?:\/\//i.test(v)) return v;
          v = v.replace(/^@+/, '').replace(/\/+$/, '');
          return v;
        }
        function canonicalSocial(platform, value){
          if (!platform || !value) return { handle: '', url: '' };
          let handle = value;
          let urlValue = value;
          if (/^https?:\/\//i.test(value)){
            try {
              const parsed = new URL(value);
              const segments = parsed.pathname.split('/').filter(Boolean);
              if (platform === 'Instagram'){
                handle = segments[0] ? segments[0].replace(/^@+/, '') : '';
              } else if (platform === 'TikTok'){
                const last = segments.pop() || '';
                handle = last.replace(/^@+/, '');
              } else if (platform === 'YouTube'){
                const last = segments.pop() || '';
                handle = last.replace(/^@+/, '');
              } else if (platform === 'Facebook'){
                handle = segments[0] || '';
              }
            } catch (err) {
              handle = value.replace(/^@+/, '').replace(/\/+$/, '');
            }
          }
          handle = (handle || '').replace(/^@+/, '').replace(/\/+$/, '');
          let url = '';
          if (handle){
            if (platform === 'Instagram'){
              url = `https://www.instagram.com/${handle}/`;
            } else if (platform === 'TikTok'){
              url = `https://www.tiktok.com/@${handle}`;
            } else if (platform === 'YouTube'){
              url = `https://www.youtube.com/@${handle}`;
            } else if (platform === 'Facebook'){
              url = `https://www.facebook.com/${handle}`;
            }
          }
          if (!url){
            url = urlValue;
          }
          return { handle, url };
        }
        function collectSocials(){
          const rows = socialsBlock.querySelectorAll('.channel-row');
          const items = [];
          rows.forEach((row) => {
            const sel = row.querySelector('.channel-select');
            const inp = row.querySelector('.channel-handle');
            const platform = (sel && sel.value) ? sel.value : '';
            const raw = (inp && inp.value) ? inp.value : '';
            const rawHandle = normHandle(raw);
            if (platform && rawHandle){
              const { handle, url } = canonicalSocial(platform, rawHandle);
              if (handle && url){
                items.push({ platform, handle, url });
              }
            }
          });
          return items;
        }
        function hasPlatform(list, name){
          return list.some((i) => i.platform === name);
        }
        function validateSocials(){
          const firstRow = socialsBlock.querySelector('[data-row="1"]');
          const sel1 = firstRow.querySelector('.channel-select');
          const inp1 = firstRow.querySelector('.channel-handle');
          if (!sel1.value || !inp1.value.trim()){
            alert('Please provide at least one profile ‚Äî the first row is required.');
            inp1.focus();
            return false;
          }
          const items = collectSocials();
          if (items.length === 0){
            alert('Please provide at least one profile handle.');
            inp1.focus();
            return false;
          }
          const hasYT = hasPlatform(items, 'YouTube');
          const hasIGorTT = hasPlatform(items, 'Instagram') || hasPlatform(items, 'TikTok');
          if (!hasYT || !hasIGorTT){
            alert('Eligibility requires YouTube plus at least one of Instagram or TikTok.');
            return false;
          }
          socialsStructured.value = JSON.stringify(items);
          return true;
        }

        // ======= Helpers: Uploads =======
        function setSubmitEnabled(enabled) {
          submitBtn.disabled = !enabled;
          submitBtn.setAttribute('aria-disabled', String(!enabled));
        }
        function syncSubmitAvailability() {
          // Submit allowed only when: consent checked and uploads finished
          const canSubmit = consent.checked && contactConsent.checked && uploadsInFlight === 0;
          setSubmitEnabled(canSubmit);
        }
        function isVideoUrl(url) {
          // Cloudinary videos come from /video/upload/, but extensions can vary
          return /\/video\/upload\//.test(url) || /\.(mp4|mov|m4v)(\?|$)/i.test(url);
        }
        function makePreviewUrl(url) {
          // A small, square jpg/webp; for video, pg_1 grabs the first frame
          return url.replace('/upload/', '/upload/pg_1,c_fill,w_600,h_600,q_auto,f_auto/');
        }
        function makePlayableUrl(url) {
          // For videos: force MP4/H.264 + AAC; for images: deliver f_auto
          if (isVideoUrl(url)) {
            return url.replace('/upload/', '/upload/f_mp4,vc_h264,ac_aac/');
          }
          return url.replace('/upload/', '/upload/q_auto,f_auto/');
        }
        function renderPreviews() {
          preview.innerHTML = '';
          uploaded.forEach((u, i) => {
            const div = document.createElement('div');
            div.className = 'thumb';
            const p = previews[i] || makePreviewUrl(u);
            const img = document.createElement('img');
            img.src = p;
            img.alt = isVideoUrl(u) ? 'Video preview' : 'Image preview';
            div.appendChild(img);
            if (isVideoUrl(u)) {
              const badge = document.createElement('span');
              badge.className = 'badge';
              badge.textContent = 'Video';
              div.appendChild(badge);
            }
            preview.appendChild(div);
          });
          urlsHidden.value = uploaded.join(',');
          playableHidden.value = playable.join(',');
          previewsHidden.value = previews.join(',');
          urlsReadonly.value = uploaded.join('\n');
        }
        function lockSubmitWhileUploading(lock) {
          uploadsInFlight += lock ? 1 : -1;
          if (uploadsInFlight < 0) uploadsInFlight = 0;
          syncSubmitAvailability();
        }
        function openWidget() {
          if (widgetInstance) {
            widgetInstance.open();
            return;
          }

          if (buildWidget() && widgetInstance) {
            setTimeout(() => {
              if (widgetInstance) {
                widgetInstance.open();
              }
            }, 20);
            return;
          }

          console.error('Cloudinary script failed to load or is blocked.');
          if (errorBox) {
            errorBox.textContent = 'The uploader could not load. Please allow widget.cloudinary.com or try again.';
            errorBox.style.display = 'block';
          } else {
            alert('The uploader could not load. Please allow widget.cloudinary.com or try again.');
          }
        }

        // ======= Wire events =======
        consent.addEventListener('change', syncSubmitAvailability);
        contactConsent.addEventListener('change', syncSubmitAvailability);
        if (openUploaderBtn) openUploaderBtn.addEventListener('click', openWidget);
        if (clearUploadsBtn) clearUploadsBtn.addEventListener('click', function() {
          uploaded = []; playable = []; previews = [];
          renderPreviews();
          syncSubmitAvailability();
        });

        // Initial state
        syncSubmitAvailability();

        // ======= AJAX Submit to Formspree (no redirect) =======
        form.addEventListener('submit', async function(e) {
          e.preventDefault();

          // Validate required fields first
          const nameInput = document.getElementById('name');
          const emailInput = document.getElementById('email');

          if (!nameInput.value.trim()) {
            e.preventDefault();
            e.stopImmediatePropagation();
            alert('Please enter your name.');
            nameInput.focus();
            return false;
          }

          if (!emailInput.value.trim()) {
            e.preventDefault();
            e.stopImmediatePropagation();
            alert('Please enter your email address.');
            emailInput.focus();
            return false;
          }

          // Basic email format validation
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailPattern.test(emailInput.value.trim())) {
            e.preventDefault();
            e.stopImmediatePropagation();
            alert('Please enter a valid email address.');
            emailInput.focus();
            return false;
          }

          // Validate channel entries first
          if (!validateSocials()){
            e.preventDefault();
            e.stopImmediatePropagation();
            return false;
          }
          // Gate on consent + uploads
          if (uploadsInFlight > 0) {
            e.preventDefault();
            alert('Please wait for uploads to finish.');
            return false;
          } else if (!consent.checked) {
            e.preventDefault();
            alert('Please confirm you own the media and grant permission.');
            consent.focus();
            return false;
          } else if (!contactConsent.checked) {
            e.preventDefault();
            alert('Please allow us to email you back about this submission.');
            contactConsent.focus();
            return false;
          }

          e.preventDefault();
          setSubmitEnabled(false);
          thankYou.style.display = 'none';
          if (errorBox) {
            errorBox.style.display = 'none';
            errorBox.textContent = '';
          }

          try {
            const data = new FormData(form);
            const resp = await fetch(form.action, {
              method: 'POST',
              body: data,
              headers: { 'Accept': 'application/json' }
            });

            if (resp.ok) {
              form.reset();
              uploaded = []; playable = []; previews = [];
              renderPreviews();
              thankYou.style.display = 'block';
              if (errorBox) {
                errorBox.style.display = 'none';
              }
            } else {
              if (errorBox) {
                errorBox.textContent = 'There was a problem sending your submission. Please try again.';
                errorBox.style.display = 'block';
              } else {
                alert('‚ùå There was a problem sending your submission. Please try again.');
              }
            }
          } catch (err) {
            console.error(err);
            if (errorBox) {
              errorBox.textContent = 'Network error. Please try again.';
              errorBox.style.display = 'block';
            } else {
              alert('‚ùå Network error. Please try again.');
            }
          } finally {
            syncSubmitAvailability();
          }
        });

      });
      </script>
      <p class="tiny" style="margin-top:12px;opacity:.75;">
        üìå Features are <strong>only</strong> accepted through this website. We don‚Äôt take submissions via YouTube comments or social DMs.
      </p>

      <section id="feature-your-tank-faq" class="feature-faq feature-card feature-card--faq" aria-labelledby="faq-title">
        <h2 id="faq-title">Feature Your Tank ‚Äî FAQ</h2>

        <p class="feature-faq-intro">
          Have questions before you submit your aquarium? Here are quick answers about photos, credit, and how the process works.
        </p>

        <dl class="feature-faq-list">
          <dt>How do I submit my aquarium photos and tank details?</dt>
          <dd>
            <p>
              All submissions go through this page‚Äôs secure form. Fill out the Quick Facts, agree to the consent checkboxes, and upload your photos or short videos using the ‚ÄúAdd Photos/Videos‚Äù button.
            </p>
            <p><strong>Note:</strong> We don‚Äôt accept feature requests by email, YouTube comments, or social DMs.</p>
          </dd>

          <dt>What kind of photos work best for a feature?</dt>
          <dd>
            <p>
              Clear, well-lit photos taken straight on work best. Wipe the glass inside and out, wait for the water to settle, and turn off room lights so your aquarium lighting can shine.
            </p>
            <ul>
              <li>Show the full tank in at least one image.</li>
              <li>Add close-ups of your favorite fish, plants, or aquascape details.</li>
            </ul>
          </dd>

          <dt>Can I use my phone to take the pictures and videos?</dt>
          <dd>
            <p>
              Yes. Most featured tanks are shot on modern smartphones. Just hold the phone steady, avoid using digital zoom, and let the camera focus before you tap the shutter.
            </p>
          </dd>

          <dt>What file types and limits should I know about?</dt>
          <dd>
            <p>
              You can upload up to 10 files per submission, with a recommended maximum of about 80&nbsp;MB per file. Supported formats include photos and short clips: <strong>jpg, jpeg, png, webp, heic, mp4, mov</strong>.
            </p>
          </dd>

          <dt>Will I be credited if my tank is featured?</dt>
          <dd>
            <p>
              Yes. If we feature your tank, we‚Äôll use the name and social handle you provide so we can give you credit in the description or caption when your tank appears on The Tank Guide or our social channels.
            </p>
          </dd>

          <dt>Do I keep ownership of my photos and videos?</dt>
          <dd>
            <p>
              You keep ownership of your photos and videos. By submitting, you confirm that you own the media and give The Tank Guide permission to showcase it as part of our educational content, with credit.
            </p>
            <p>
              For full details, please review our <a href="/privacy.html">Privacy Policy</a> and <a href="/terms.html">Terms</a>.
            </p>
          </dd>

          <dt>What details should I include with my tank submission?</dt>
          <dd>
            <p>
              Please include your tank size (gallons or liters), your livestock list (fish, inverts, and plants), your filtration and lighting, and anything special about how you run the tank. A short story about your tank‚Äôs journey is always welcome.
            </p>
          </dd>

          <dt>Is there any cost to submit or be featured?</dt>
          <dd>
            <p>
              No. Submitting your tank for consideration is free. Features are selected based on educational value, clarity of photos, and variety of setups so we can inspire beginners at many different tank sizes and budgets.
            </p>
          </dd>
        </dl>
      </section>
    </section>
    <div class="ttg-ad-slot" aria-label="Advertisement" id="ad-feature-your-tank-bottom" data-ad-label="TTG_FeatureYourTank_Bottom ‚Ä¢ Slot 7540927750">
      <!-- TTG_FeatureYourTank_Bottom -->
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-9905718149811880"
           data-ad-slot="7540927750"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </main>
<script>
  (function() {
    var QA_MODE = false;
    var body = document.body;
    if (QA_MODE && body) {
      body.setAttribute('data-ad-qa', 'true');
    }

    var slots = document.querySelectorAll('.ttg-ad-slot');
    if (!slots.length) {
      return;
    }

    var evaluateSlot = function(slot, ins) {
      if (!slot || !ins) return;
      var hasIframe = ins.querySelector('iframe');
      var height = ins.offsetHeight;
      if (hasIframe && height > 40) {
        slot.classList.remove('ttg-ad-slot--empty');
      } else {
        slot.classList.add('ttg-ad-slot--empty');
      }
    };

    slots.forEach(function(slot) {
      var ins = slot.querySelector('ins.adsbygoogle');
      if (!ins) {
        return;
      }

      var refresh = function() { evaluateSlot(slot, ins); };
      refresh();

      var observer = new MutationObserver(refresh);
      observer.observe(ins, { childList: true, subtree: true });

      window.addEventListener('load', function() {
        setTimeout(refresh, 1800);
      });

      window.addEventListener('ttg:consent-change', refresh);
    });
  })();
</script>

  <script src="/js/footer-loader.js?v=1.5.2" defer></script>
  <section class="legal-links" aria-label="Site legal links">
    <a href="/privacy-legal.html">Privacy Policy</a>
    <a href="/terms.html">Terms</a>
    <a href="/contact-feedback.html">Contact</a>
  </section>
  <noscript>
    <section class="legal-links" aria-label="Site legal links (noscript)">
      <a href="/privacy-legal.html">Privacy Policy</a>
      <a href="/terms.html">Terms</a>
      <a href="/contact-feedback.html">Contact</a>
    </section>
  </noscript>

<div id="site-footer" data-footer-src="/footer.html?v=1.5.2"></div>

  <!-- WebPage schema: Feature Your Tank submission hub -->
  <!-- TODO: Add FAQPage schema when FAQ content is published. -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://thetankguide.com/#organization",
        "name": "FishKeepingLifeCo",
        "alternateName": ["The Tank Guide", "Fish Keeping Life Co", "fishkeepinglife"],
        "description": "FishKeepingLifeCo is an educational publishing company specializing in beginner-friendly aquarium science. The Tank Guide is our flagship website providing interactive tools and research-backed fishkeeping guidance for families and new hobbyists.",
        "url": "https://thetankguide.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://thetankguide.com/assets/img/Logo-Master-512x512.PNG",
          "width": 512,
          "height": 512
        },
        "sameAs": [
          "https://www.tiktok.com/@fishkeepinglifeco",
          "https://www.instagram.com/fishkeepinglifeco",
          "https://www.youtube.com/@FishKeepingLifeCo",
          "https://x.com/fishkeepinglife",
          "https://www.facebook.com/FishKeepingLifeCo",
          "https://www.threads.net/@fishkeepinglifeco",
          "https://www.reddit.com/u/FishKeepingLifeCo"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://thetankguide.com/#website",
        "url": "https://thetankguide.com/",
        "name": "The Tank Guide",
        "publisher": { "@id": "https://thetankguide.com/#organization" },
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://thetankguide.com/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "WebPage",
        "@id": "https://thetankguide.com/feature-your-tank.html#webpage",
        "url": "https://thetankguide.com/feature-your-tank.html",
        "name": "Feature Your Tank ‚Äî The Tank Guide",
        "description": "Submit your aquarium‚Äôs Quick Facts to be featured on The Tank Guide: size, stock, substrate, filtration, lighting, and more.",
        "isPartOf": { "@id": "https://thetankguide.com/#website" },
        "publisher": { "@id": "https://thetankguide.com/#organization" },
        "inLanguage": "en-US",
        "mainEntity": {
          "@type": "WebApplication",
          "name": "Feature Your Tank Submission Form",
          "applicationCategory": "ProductivityApplication",
          "url": "https://thetankguide.com/feature-your-tank.html#feature-tank-form",
          "description": "Secure form that gathers aquarium specs, livestock, and media uploads for editorial review."
        }
      },
      {
        "@type": "BreadcrumbList",
        "@id": "https://thetankguide.com/feature-your-tank.html#breadcrumb",
        "itemListElement": [
          { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://thetankguide.com/" },
          { "@type": "ListItem", "position": 2, "name": "Feature Your Tank", "item": "https://thetankguide.com/feature-your-tank.html" }
        ]
      },
      {
        "@type": "FAQPage",
        "@id": "https://thetankguide.com/feature-your-tank.html#faq",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "How do I submit my aquarium photos and tank details?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "All submissions go through this page‚Äôs secure form. Fill out the Quick Facts, agree to the consent checkboxes, and upload your photos or short videos using the ‚ÄúAdd Photos/Videos‚Äù button. We don‚Äôt accept feature requests by email, YouTube comments, or social DMs."
            }
          },
          {
            "@type": "Question",
            "name": "What kind of photos work best for a feature?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Clear, well-lit photos taken straight on work best. Wipe the glass inside and out, wait for the water to settle, turn off room lights, and let your aquarium lighting provide the main illumination so the tank details are easy to see."
            }
          },
          {
            "@type": "Question",
            "name": "Can I use my phone to take the pictures and videos?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes. Most featured tanks are shot on modern smartphones. Hold the phone steady, avoid digital zoom, and let the camera focus before taking the shot for the sharpest results."
            }
          },
          {
            "@type": "Question",
            "name": "What file types and limits should I know about?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "You can upload up to 10 files per submission, with a recommended maximum of about 80 MB per file. Supported formats include photos and short clips: jpg, jpeg, png, webp, heic, mp4, and mov."
            }
          },
          {
            "@type": "Question",
            "name": "Will I be credited if my tank is featured?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes. If your tank is selected, we‚Äôll use the name and social handle you provide so we can credit you in the description or caption when your tank appears on The Tank Guide or our social channels."
            }
          },
          {
            "@type": "Question",
            "name": "Do I keep ownership of my photos and videos?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "You keep ownership of your photos and videos. By submitting, you confirm that you own the media and give The Tank Guide permission to showcase it as part of our educational content, with credit. For full details, please review the site‚Äôs Privacy Policy and Terms."
            }
          },
          {
            "@type": "Question",
            "name": "What details should I include with my tank submission?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Include your tank size in gallons or liters, your livestock list, your filtration and lighting, and any special approach you use to keep the system stable. A short story about your tank‚Äôs journey also helps other hobbyists learn from your experience."
            }
          },
          {
            "@type": "Question",
            "name": "Is there any cost to submit or be featured?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No. Submitting your tank for consideration is free. Features are selected based on educational value, clarity of photos, and variety of setups so we can inspire beginners across many tank sizes and budgets."
            }
          }
        ]
      }
    ]
  }
  </script>
</body>
</html>
