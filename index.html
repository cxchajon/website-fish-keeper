<!-- Updated: Added homepage About card while keeping the hero free of the global drawer. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fishkeeping Guides &amp; Tools — The Tank Guide</title>
  <meta name="description" content="The Tank Guide by FishKeepingLifeCo delivers fishkeeping guides, a stocking advisor, cycling coach, and gear tips to plan thriving freshwater aquariums.">
  <link rel="canonical" href="https://thetankguide.com/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="The Tank Guide">
  <meta property="og:title" content="Fishkeeping Guides &amp; Tools — The Tank Guide">
  <meta property="og:description" content="The Tank Guide by FishKeepingLifeCo delivers fishkeeping guides, a stocking advisor, cycling coach, and gear tips to plan thriving freshwater aquariums.">
  <meta property="og:url" content="https://thetankguide.com/">
  <meta property="og:image" content="https://thetankguide.com/logo.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@fishkeepinglife">
  <meta name="twitter:title" content="Fishkeeping Guides &amp; Tools — The Tank Guide">
  <meta name="twitter:description" content="The Tank Guide by FishKeepingLifeCo delivers fishkeeping guides, a stocking advisor, cycling coach, and gear tips to plan thriving freshwater aquariums.">
  <meta name="twitter:image" content="https://thetankguide.com/logo.png">

  <link rel="stylesheet" href="css/style.css?v=1.0.9" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root{
      --bg:#0c2740;
      --fg:#ffffff;
      --muted:rgba(255,255,255,.85);
      --card-bg: rgba(255,255,255,.10);
      --card-line: rgba(255,255,255,.18);
      --btn-fg:#08324a;
      --btn-bg:#ffffff;
      --btn-bg-hover:#f3f6ff;
      --link-line: rgba(255,255,255,.22);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}

    /* Hero gradient */
    .hero{
      min-height:100dvh;
      padding:28px 20px 38px;
      background:
        radial-gradient(1200px 800px at 75% -10%, #36c2cc 0%, rgba(54,194,204,0.0) 60%),
        radial-gradient(1200px 900px at -10% 120%, #0077c7 0%, rgba(0,119,199,0.0) 60%),
        linear-gradient(140deg,#0077c7 0%, #0b6ea6 40%, #0a4d87 100%);
    }

    .wrap{max-width:1080px;margin:0 auto}

    .visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}

    /* Brand */
    .brand-name{font-weight:800;font-size:1.4rem}
    .brand-sub{font-size:1rem;opacity:.9}
    .tagline{margin-top:6px;font-size:1.05rem;opacity:.85}

    /* Headline (unused placeholder for now) */
    .headline{max-width:900px;font-weight:800;font-size:clamp(2rem,4vw,3.2rem);line-height:1.1;margin:40px 0 26px}

    /* Launch grid */
    .features-grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 24px;
    }
    @media (max-width: 1024px){
      .features-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 640px){
      .features-grid{ grid-template-columns: 1fr; }
    }

    .card{background:var(--card-bg);border:1px solid var(--card-line);border-radius:14px;padding:16px;backdrop-filter: blur(6px);display:grid;gap:10px}
    .card h3{margin:2px 0 4px;font-size:1.1rem}
    .card p{margin:0;color:var(--muted);min-height:3.2em}
    .actions{margin-top:8px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid var(--link-line);background:var(--btn-bg);color:var(--btn-fg);font-weight:700;text-decoration:none}
    .btn:hover{background:var(--btn-bg-hover)}

    /* SEO intro (subtle, ~25% smaller) */
    .seo-intro{
      max-width:700px;
      margin:1rem auto 0;   /* sits close to socials */
      padding:0;
      font-size:0.75em;     /* ~25% smaller than body text */
      line-height:1.4;
      color:var(--muted);
      text-align:center;
    }
    .seo-intro strong{color:var(--fg)}
  </style>
  <script defer src="js/nav.js?v=1.1.0"></script>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "https://thetankguide.com/#organization",
  "name": "FishKeepingLifeCo",
  "alternateName": "The Tank Guide",
  "url": "https://thetankguide.com",
  "addressCountry": "US",
  "addressRegion": "NY",
  "logo": "https://thetankguide.com/logo.png",
  "image": "https://thetankguide.com/logo.png",
  "slogan": "Educational Aquarium Books & Tools",
  "description": "FishKeepingLifeCo publishes educational aquarium books and interactive online tools like The Tank Guide to help new aquarists and hobbyists set up, stock, and maintain thriving aquariums.",
  "brand": {
    "@type": "Brand",
    "name": "The Tank Guide"
  },
  "parentOrganization": {
    "@type": "Organization",
    "name": "CXLXC LLC"
  },
  "foundingDate": "2025-09-12",
  "publishingPrinciples": "https://thetankguide.com/about.html",
  "areaServed": ["United States", "New York"],
  "knowsAbout": [
    "Aquariums",
    "Fishkeeping",
    "Nitrogen Cycle",
    "Freshwater Aquariums",
    "Planted Tanks",
    "Aquarium Setup Basics",
    "Water Parameters",
    "Aquarium Cycling"
  ],
  "contactPoint": [
    {
      "@type": "ContactPoint",
      "contactType": "customer support",
      "email": "info@thetankguide.com",
      "availableLanguage": ["en"]
    }
  ],
  "sameAs": [
    "https://www.instagram.com/FishKeepingLifeCo",
    "https://www.tiktok.com/@FishKeepingLifeCo",
    "https://www.facebook.com/fishkeepinglifeco",
    "https://x.com/fishkeepinglife?s=21",
    "https://www.youtube.com/@fishkeepinglifeco",
    "https://www.amazon.com/author/fishkeepinglifeco"
  ]
}
  </script>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": "https://thetankguide.com/#website",
  "url": "https://thetankguide.com/",
  "name": "The Tank Guide",
  "alternateName": "FishKeepingLifeCo",
  "inLanguage": "en",
  "publisher": {
    "@id": "https://thetankguide.com/#organization"
  },
  "logo": {
    "@type": "ImageObject",
    "url": "https://thetankguide.com/favicon.ico"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://thetankguide.com/?s={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
  </script>
  <!-- Consent Mode defaults (load FIRST) -->
  <script src="/assets/js/consent-mode.js" defer></script>
  <!-- Google tag (gtag.js) — GA4 -->
  <!--#include virtual="/includes/ga4.html" -->

  <!-- AdSense loader (keep one global instance only) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9905718149811880"
    crossorigin="anonymous"></script>
  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "YOUR_CLOUDFLARE_TOKEN"}'></script>
  <!-- End Cloudflare Web Analytics -->
  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>
<body class="page-background">
  <div id="site-nav"></div>

  <main>
  <!-- HERO -->
  <header class="hero">
    <div class="wrap">
      <!-- Brand -->
      <div class="hero-header">
        <h1 class="brand-name hero-title">Fishkeeping Guides &amp; Tools — The Tank Guide</h1>
        <p class="brand-sub hero-subline">a product of <strong>FishKeepingLifeCo</strong></p>
        <p class="tagline hero-tagline" id="hero-blurb">Smart fishkeeping guides, planning tools, and step-by-step checklists to set up, stock, and care for your aquarium.</p>
      </div>

      <!-- Launchpad -->
      <section id="features" aria-labelledby="features-title">
        <h2 id="features-title" class="visually-hidden">Tools &amp; Sections</h2>
        <div class="features-grid">
          <article class="card" aria-labelledby="card-stocking-title">
            <h3 id="card-stocking-title">Stocking Advisor</h3>
            <p>Smart stocking made simple — plan a thriving community with confidence.</p>
            <div class="actions"><a class="btn" href="/stocking.html" aria-label="Open Stocking Advisor tool">Launch</a></div>
          </article>

          <article class="card" aria-labelledby="card-gear-title">
            <h3 id="card-gear-title">Gear</h3>
            <p>The gear you need, matched to your tank and goals.</p>
            <div class="actions"><a class="btn" href="/gear/" aria-label="Open Gear recommendations">Launch</a></div>
          </article>

          <article class="card" aria-labelledby="card-cycling-title">
            <h3 id="card-cycling-title">Cycling Coach</h3>
            <p>Master the nitrogen cycle with step-by-step guidance.</p>
            <div class="actions"><a class="btn" href="/params.html" aria-label="Open Cycling Coach tool">Launch</a></div>
          </article>

          <article class="card" aria-labelledby="card-media-title">
            <h3 id="card-media-title">Media</h3>
            <p>Watch • Read • Explore — videos and blogs for every aquarist.</p>
            <div class="actions"><a class="btn" href="/media.html" aria-label="Discover Media resources">Discover</a></div>
          </article>

          <article class="card" aria-labelledby="card-about-title">
            <h3 id="card-about-title">About</h3>
            <p>
              Learn who we are, our approach to guides and tools, and what’s next for The Tank Guide.
            </p>
            <div class="actions">
              <a class="btn" href="/about.html" aria-label="Open About page">Learn more</a>
            </div>
          </article>

          <article class="card" aria-labelledby="card-contact-title">
            <h3 id="card-contact-title">Contact</h3>
            <p>
              Questions, ideas, or spot a logic issue? Reach out with feedback, recommend fish or gear to review, or share your insights.
            </p>
            <div class="actions">
              <a class="btn" href="/contact-feedback.html" aria-label="Open Contact form">Contact &amp; Feedback</a>
            </div>
          </article>
        </div>
      </section>
    </div>
  </header>

  <div class="wrap">
    <div class="ttg-adunit" id="ad-home-mid" aria-label="Advertisement">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-9905718149811880"
           data-ad-slot="9522042154"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>

  <!-- Index-only: tighten the gap above the hero on mobile -->
  <style>
    /* HERO GAP FIX (index only) */
    @media (max-width: 768px){
      /* Remove any extra offset above hero */
      .hero{ margin-top:0 !important; padding-top:8px !important; }
      /* Ensure the first hero child doesn't push down content */
      .hero > *:first-child{ margin-top:0 !important; }
      /* Bring headline and sublines closer */
      .hero h1{ margin-top:6px !important; }
      .hero .brandline,
      .hero .subtitle,
      .hero p{ margin-top:4px !important; }
      /* Hide or neutralize decorative swoosh/wave on small screens */
      .hero .wave,
      .hero .swoosh,
      .hero .divider,
      .hero img[alt*="wave" i]{ display:none !important; }
      /* If the decoration must remain in DOM, collapse its footprint */
      .hero .wave, .hero .swoosh, .hero .divider{
        margin:0 !important; padding:0 !important; height:0 !important;
      }
    }
  </style>

  <!-- SEO Intro (blurb, sits above footer) -->
  <section class="seo-intro">
  <div class="wrap">
    <p>Welcome to The Tank Guide by FishKeepingLifeCo — your trusted home for fishkeeping guides, freshwater education, and aquarium planning checklists.</p>
    <p>Our free tools include the Stocking Advisor, Cycling Coach, Gear Guide, and 24-Hour Challenge, giving hobbyists clear answers without confusion.</p>
    <p>Whether you keep bettas, tetras, shrimp, or snails, The Tank Guide helps you plan, stock, and maintain thriving aquariums with confidence.</p>
  </div>
</section>

  </main>
  <div id="site-footer"></div>
  <script src="/js/footer-loader.js" defer></script>
<style>
  /* TTG Popup Theme v1 — High-Contrast Minimal (scoped to #ttg-howitworks) */
  .ttg-visually-hidden{position:absolute!important;left:-9999px!important;top:auto!important;width:1px!important;height:1px!important;overflow:hidden!important}

  /* Under-hero "How it works" — TEXT ONLY (hard reset vs global button styles) */
  .ttg-howitworks-link{
    all: unset;                 /* wipe inherited button styles */
    display: inline;            /* no block box, no pill */
    cursor: pointer;
    margin-left: 0; margin-right: 0;
    /* Typography */
    font: inherit;
    font-size: .95rem;
    line-height: 1;
    /* Link look */
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  .ttg-howitworks-link:hover{ opacity: .9; }
  .ttg-howitworks-link:focus{ outline: 2px solid currentColor; outline-offset: 2px; }
  /* tighten spacing under hero blurb */
  .ttg-howitworks-link-wrap{ margin-top: .35rem; }

  /* Overlay + Dialog */
  #ttg-howitworks .ttg-overlay{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;
    background:rgba(0,0,0,.5);backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px)
  }
  #ttg-howitworks .ttg-dialog{
    background:#0b0b0b;color:#f4f4f4;width:calc(100% - 2rem);max-width:560px;
    border:1px solid rgba(255,255,255,.14);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35);
    padding:1.25rem 1.25rem 1rem;position:relative
  }

  /* Motion (respect reduced motion) */
  @media (prefers-reduced-motion:no-preference){
    #ttg-howitworks .ttg-overlay[data-state="open"] .ttg-dialog{transform:translateY(0);opacity:1;transition:transform 220ms ease,opacity 220ms ease}
    #ttg-howitworks .ttg-overlay[data-state="closed"] .ttg-dialog{transform:translateY(10px);opacity:0;transition:transform 140ms ease,opacity 140ms ease}
  }

  /* Mobile bottom sheet */
  @media (max-width:600px){
    #ttg-howitworks .ttg-overlay{align-items:flex-end}
    #ttg-howitworks .ttg-dialog{width:100%;max-width:none;border-radius:16px 16px 0 0;padding-bottom:env(safe-area-inset-bottom,16px)}
  }

  #ttg-howitworks .ttg-title{margin:0 2rem .75rem 0;font-size:1.35rem;line-height:1.2;font-weight:800}
  #ttg-howitworks .ttg-close{
    position:absolute;top:10px;right:10px;border:none;background:transparent;color:inherit;font-size:1.25rem;line-height:1;cursor:pointer
  }
  #ttg-howitworks .ttg-close:focus{outline:2px solid currentColor;outline-offset:2px}

  #ttg-howitworks .ttg-list{margin:.25rem 0 .75rem 1.15rem;padding:0}
  #ttg-howitworks .ttg-list li{margin:.4rem 0}
  #ttg-howitworks .ttg-list a{color:#9bdcff;text-decoration:underline;text-underline-offset:2px}
  #ttg-howitworks .ttg-footnote{margin-top:.75rem;font-size:.95rem;color:#d7d7d7}
  #ttg-howitworks .ttg-footnote a{color:#9bdcff}

  #ttg-howitworks .ttg-actions{margin-top:1rem;display:flex;justify-content:flex-end}
  #ttg-howitworks .ttg-primary{
    border:none;background:#2279b5;color:#fff;padding:.6rem 1rem;border-radius:8px;font-weight:700;cursor:pointer;min-height:44px
  }
  #ttg-howitworks .ttg-primary:focus{outline:2px solid #9bdcff;outline-offset:2px}

  /* Show helper */
  #ttg-howitworks .ttg-overlay[aria-hidden="false"]{display:flex}
</style>

<!-- TTG How It Works (scoped) -->
<div id="ttg-howitworks">
  <div class="ttg-overlay" aria-hidden="true" data-state="closed">
    <div class="ttg-dialog" role="dialog" aria-modal="true" aria-labelledby="ttg-howitworks-title" aria-describedby="ttg-howitworks-desc" tabindex="-1">
      <button class="ttg-close" type="button" aria-label="Close">×</button>
      <h2 id="ttg-howitworks-title" class="ttg-title">How The Tank Guide Works</h2>
      <div id="ttg-howitworks-desc">
        <ol class="ttg-list">
          <li><strong>Plan what you keep in the <a href="/stocking.html">Stocking Advisor</a>.</strong><br/>Start with your ideas — we’ll help check if the fish are compatible.</li>
          <li><strong>Gear up in the <a href="/gear/">Aquarium Gear Guide</a>.</strong><br/>Find the right equipment for the tank you’re building.</li>
          <li><strong>Get your water ready with the <a href="/params.html">Cycling Coach</a>.</strong><br/>Build a healthy environment for your tank.</li>
        </ol>
        <div class="ttg-footnote">Prefer reading or videos? Explore guides and videos in the <a href="/media.html">Media Hub</a>.</div>
      </div>
      <div class="ttg-actions">
        <button class="ttg-primary" type="button">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
/* TTG How It Works — under-hero link; accessible modal */
(function(){
  const overlay = document.querySelector('#ttg-howitworks .ttg-overlay');
  const dialog  = document.querySelector('#ttg-howitworks .ttg-dialog');
  const btnClose= document.querySelector('#ttg-howitworks .ttg-close');
  const btnPrimary = document.querySelector('#ttg-howitworks .ttg-primary');
  // Insert a subtle text-only "How it works" link directly under the hero blurb
  function insertUnderHero() {
    // Remove any previous button version so we don't inherit global styles
    document.getElementById('ttg-howitworks-opener')?.remove();

    const link = document.createElement('a');
    link.href = '#how-it-works';
    link.className = 'ttg-howitworks-link hero-how';
    link.id = 'ttg-howitworks-opener';
    link.setAttribute('role','button');
    link.setAttribute('aria-haspopup','dialog');
    link.textContent = 'How it works';

    // Wrap for controlled spacing (prevents full-width pill look)
    const wrap = document.createElement('div');
    wrap.className = 'ttg-howitworks-link-wrap';
    wrap.style.marginTop = '0';
    wrap.appendChild(link);

    // Preferred anchor: <p id="hero-blurb">
    let target = document.getElementById('hero-blurb');

    // If no explicit id, match the blurb text
    if (!target) {
      const candidate = Array.from((document.querySelector('main')||document.body).querySelectorAll('p'))
        .find(p => (p.textContent || '').trim().toLowerCase().startsWith('smart tools and guides to plan'));
      if (candidate) target = candidate;
    }

    // Fallback: first <p> inside <main>
    if (!target) {
      const main = document.querySelector('main') || document.body;
      target = main.querySelector('p');
    }

    if (target && target.parentNode) {
      target.parentNode.insertBefore(wrap, target.nextSibling);
    } else {
      (document.querySelector('main') || document.body).insertBefore(wrap, (document.querySelector('main') || document.body).firstChild);
    }

    // Click → open modal
    link.addEventListener('click', (e)=>{ e.preventDefault(); openModal(link); });
    return link;
  }
  const linkOpener = insertUnderHero();

  // Focus trap
  let focusables=[];
  function refreshFocusables(){
    focusables = dialog.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])');
  }
  function trapFocus(e){
    if(e.key!=='Tab'||focusables.length===0) return;
    const first=focusables[0], last=focusables[focusables.length-1];
    if(e.shiftKey && document.activeElement===first){ last.focus(); e.preventDefault(); }
    else if(!e.shiftKey && document.activeElement===last){ first.focus(); e.preventDefault(); }
  }

  let lastOpener=null;
  function openModal(opener){
    lastOpener = opener || document.activeElement;
    overlay.setAttribute('aria-hidden','false');
    overlay.setAttribute('data-state','open');
    refreshFocusables();
    dialog.focus({preventScroll:true});
    document.addEventListener('keydown', onKeydown);
    dialog.addEventListener('keydown', trapFocus);
  }
  function closeModal(){
    overlay.setAttribute('aria-hidden','true');
    overlay.setAttribute('data-state','closed');
    document.removeEventListener('keydown', onKeydown);
    dialog.removeEventListener('keydown', trapFocus);
    setTimeout(()=>{ if(overlay.getAttribute('aria-hidden')==='true'){ overlay.style.display='none'; overlay.style.display=''; } }, 150);
    if(lastOpener && lastOpener.focus) lastOpener.focus({preventScroll:true});
  }
  function onKeydown(e){ if(e.key==='Escape') closeModal(); }

  // Click handlers
  btnClose&&btnClose.addEventListener('click', closeModal);
  btnPrimary&&btnPrimary.addEventListener('click', closeModal);
  overlay&&overlay.addEventListener('click',(e)=>{ if(!dialog.contains(e.target)) closeModal(); });
  // Link opener added in insertUnderHero()
})();
</script>
<!-- === TTG Cookie Consent START === -->
<div id="ttg-consent" class="ttg-consent" data-consent-banner>
  <div class="ttg-consent__inner" role="dialog" aria-labelledby="ttg-consent-title" aria-describedby="ttg-consent-desc">
    <h3 id="ttg-consent-title">Cookies & Advertising</h3>
    <p id="ttg-consent-desc">
      We use cookies to run this site and (if you allow) to show relevant ads from Google AdSense. You can accept all cookies, reject personalized ads, or manage preferences anytime.
    </p>
    <div class="ttg-consent__actions">
      <button type="button" class="ttg-btn ttg-btn--secondary js-consent-reject" id="ttg-consent-reject">Reject (Non-personalized)</button>
      <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-manage">Manage</button>
      <button type="button" class="ttg-btn ttg-btn--primary js-consent-accept" id="ttg-consent-accept">Accept All</button>
    </div>
  </div>
</div>

<div id="ttg-consent-modal" class="ttg-consent-modal" hidden aria-modal="true" role="dialog" aria-labelledby="ttg-consent-modal-title">
  <div class="ttg-consent-modal__panel">
    <h3 id="ttg-consent-modal-title">Cookie Preferences</h3>
    <form id="ttg-consent-form">
      <label class="ttg-row">
        <input type="checkbox" checked disabled />
        <span><strong>Essential</strong> — required for core site functions.</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-analytics" />
        <span><strong>Analytics</strong> — understand usage (if enabled later).</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-ads" />
        <span><strong>Advertising</strong> — allow personalized ads (Google AdSense).</span>
      </label>
      <div class="ttg-consent-modal__actions">
        <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-cancel">Cancel</button>
        <button type="submit" class="ttg-btn ttg-btn--primary">Save Preferences</button>
      </div>
    </form>
  </div>
</div>

<!-- === TTG Consent Banner Controller START === -->
  <script defer src="/assets/js/consent-banner.js"></script>
<!-- === TTG Consent Banner Controller END === -->


<!-- === TTG CMP Consent Bridge START === -->
<script>
(function(){
  // Helper: map TCF consent to our single "ads granted" flag.
  // We consider "granted" only when Purpose 1 (storage) AND Purpose 4 (select personalised ads)
  // are consented. If you want to allow NON-personalised ads when only Purpose 1 is granted,
  // set allowNPA=true below.
  var allowNPA = true; // if true, we’ll treat Purpose 1 only as "granted" for showing slots (Google will serve NPA ads).

  function setAdConsent(granted){
    document.documentElement.setAttribute('data-ad-consent', granted ? 'granted' : 'denied');
    document.documentElement.classList.toggle('is-ads-disabled', !granted);
    window.__TTG_ADS_DISABLED__ = !granted;
    // Inform any listeners (our ad loader later)
    window.dispatchEvent(new CustomEvent('ttg:consent-change', {detail:{granted}}));
  }

  // If Google CMP is present, it defines __tcfapi.
  function hookTCF(){
    if (typeof window.__tcfapi !== 'function') return false;

    // Hide our local cookie banner when Google CMP is running (EEA users).
    try{
      var banner = document.getElementById('ttg-consent');
      var modal  = document.getElementById('ttg-consent-modal');
      if (banner){ banner.hidden = true; banner.classList.remove('is-open'); }
      if (modal)  modal.hidden  = true;
    }catch(e){}

    // Listen for consent changes
    window.__tcfapi('addEventListener', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      // Purpose 1 = storage; Purpose 4 = personalised ads
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];

      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    // Also fetch current state once
    window.__tcfapi('getTCData', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];
      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    return true;
  }

  // Try to hook immediately; if CMP loads a bit later, poll briefly
  if (!hookTCF()){
    var tries = 0, t = setInterval(function(){
      tries++;
      if (hookTCF() || tries > 40) clearInterval(t); // up to ~4s
    }, 100);
  }

  // Fallback for non-EEA visitors (no __tcfapi): keep using our local preference
  // Our existing local banner writes ttgConsentV2 with {ads:true|false}.
  // If CMP absent, keep existing behavior (do not force-show anything here).

})();
</script>
<!-- === TTG CMP Consent Bridge END === -->

<!-- === TTG Cookie Consent END === -->
</body>
</html>
