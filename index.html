<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FishkeepingLifeCo — Stocking Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- App styles (case-sensitive on some hosts). If your file is css/style.css, update the path/name. -->
  <link rel="stylesheet" href="css/Style.css" />
  <style>
    /* Safe defaults so it's usable even if Style.css is missing */
    :root { --good:#1fbf75; --warn:#f5b301; --bad:#e25555; --card: rgba(255,255,255,.06); --line: rgba(255,255,255,.12) }
    * { box-sizing: border-box }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#0b1020; color:#eef3ff }
    .wrap { max-width: 1024px; margin: 0 auto; padding: 18px }
    .brand { display:flex; align-items:flex-end; gap:10px; margin-bottom: 8px }
    .brand-name { font-weight:700; letter-spacing:.3px }
    .brand-sub { opacity:.8; font-size:.95rem }
    h1,h2 { margin: 0 0 10px 0 }
    section.card {
      background: var(--card); border: 1px solid var(--line); border-radius: 12px; padding: 14px; margin-bottom: 14px; backdrop-filter: blur(8px);
    }
    .row { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 12px }
    label { display:block; font-size:.85rem; opacity:.9; margin-bottom:6px }
    input, select, button {
      width:100%; padding:10px; border-radius:10px; border:1px solid var(--line); background:rgba(255,255,255,.05); color:#eef3ff;
    }
    button.btn { cursor:pointer; border:1px solid var(--line) }
    button.btn:disabled { opacity:.6; cursor:not-allowed }

    .bar { width:100%; height:12px; background:rgba(255,255,255,.08); border-radius:10px; overflow:hidden; border: 1px solid var(--line) }
    .bar-fill { height:100%; width:0% }
    .bar-fill.bio { background: linear-gradient(90deg, var(--good), var(--warn), var(--bad)) }
    .bar-fill.env { background: linear-gradient(90deg, var(--bad), var(--warn), var(--good)) }
    .bar-fill.agg { background: linear-gradient(90deg, var(--good), var(--warn), var(--bad)) }

    .warning-bubbles { display:flex; flex-wrap:wrap; gap:8px }
    .warning-bubble {
      background: rgba(229,85,85,.12); color:#ffdede; border:1px solid rgba(229,85,85,.35);
      padding:6px 10px; border-radius:999px; font-size:.8rem
    }

    table.stock { width:100%; border-collapse: collapse }
    table.stock th, table.stock td { border-bottom:1px solid var(--line); padding:10px }
    table.stock th.qty, table.stock td.qty { width:90px; text-align:center }
    table.stock th.actions, table.stock td.actions { width:180px; text-align:right }
    .actions .mini { width:auto; padding:6px 10px; margin-left:6px }
    footer { opacity:.7; margin: 18px 0 8px 0; font-size:.9rem }
    @media (max-width: 820px) {
      .row { grid-template-columns: repeat(2, minmax(0,1fr)) }
      table.stock th.actions, table.stock td.actions { width:160px }
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Brand -->
    <div class="brand" aria-label="FishkeepingLifeCo — Aquarium Education">
      <div class="brand-name">FishkeepingLifeCo</div>
      <div class="brand-sub">Aquarium Stocking Calculator</div>
    </div>

    <!-- Tank Setup -->
    <section class="card">
      <h2>Tank Setup</h2>
      <div class="row">
        <div>
          <label for="gallons">Tank Size (gallons)</label>
          <input id="gallons" type="number" min="1" value="20" inputmode="numeric" />
        </div>
        <div>
          <label for="filtration">Filtration</label>
          <select id="filtration">
            <option value="standard" selected>Standard</option>
            <option value="low">Low</option>
            <option value="high">High</option>
          </select>
        </div>
        <div>
          <label><input id="planted" type="checkbox" /> Planted Tank</label>
        </div>
        <div>
          <label for="dummy">&nbsp;</label>
          <div id="setup-msg" style="opacity:.8;font-size:.9rem">Adjust settings to see impact</div>
        </div>
      </div>
    </section>

    <!-- Compatibility Overview -->
    <section class="card" id="compat-card">
      <h2>Compatibility Overview</h2>

      <!-- Bioload -->
      <div style="margin-bottom:12px">
        <label>Bioload</label>
        <div class="bar"><div id="bioBarFill" class="bar-fill bio"></div></div>
      </div>

      <!-- Environmental Fit -->
      <div style="margin-bottom:12px">
        <label>Environmental Fit (Temp &amp; pH)</label>
        <div class="bar"><div id="envBarFill" class="bar-fill env"></div></div>
        <div id="compat-warnings" class="warning-bubbles" style="margin-top:10px"></div>
      </div>

      <!-- Aggression -->
      <div>
        <label>Aggression &amp; Compatibility</label>
        <div class="bar"><div id="aggBarFill" class="bar-fill agg"></div></div>
        <div id="aggression-warnings" class="warning-bubbles" style="margin-top:10px"></div>
      </div>
    </section>

    <!-- Add Fish -->
    <section class="card">
      <h2>Add Fish</h2>
      <div class="row">
        <div>
          <label for="fishSearch">Search</label>
          <input id="fishSearch" type="text" placeholder="Type to filter…" autocomplete="off" />
        </div>
        <div>
          <label for="fishSelect">Species</label>
          <select id="fishSelect"></select>
        </div>
        <div>
          <label for="fQty">Quantity</label>
          <input id="fQty" type="number" min="1" step="1" inputmode="numeric" />
        </div>
        <div>
          <label for="recMin">Rec Min</label>
          <input id="recMin" type="number" disabled />
        </div>
      </div>
      <div style="margin-top:12px;display:flex;gap:12px">
        <!-- type="button" to avoid implicit submit blocking on mobile -->
        <button id="addFish" class="btn" type="button">Add</button>
        <button id="reset" class="btn" type="button" style="background:var(--bad)">Clear Stock</button>
      </div>
      <small class="note" style="display:block;margin-top:10px">
        If Quantity is empty/invalid, we’ll use the Recommended minimum (or 1). Your typed number is never overwritten.
      </small>
    </section>

    <!-- Current Stock -->
    <section class="card">
      <h2>Current Stock</h2>
      <table class="stock">
        <thead>
          <tr>
            <th>Species</th>
            <th class="qty">Qty</th>
            <th class="actions">Actions</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </section>

    <footer>
      © 2025 FishkeepingLifeCo — For hobbyist use only
    </footer>
  </div>

  <!-- Data first, then logic -->
  <script src="js/fish-data.js"></script>
  <script type="module" src="js/modules/app.js?v=9.4.0"></script>
</body>
</html>