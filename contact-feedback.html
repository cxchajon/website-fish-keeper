<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact &amp; Feedback</title>
  <link rel="canonical" href="https://thetankguide.com/contact-feedback.html" />
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
  <meta name="googlebot" content="index,follow" />
  <meta
    name="description"
    content="Contact The Tank Guide team for aquarium help, share feedback, or report issues so we can improve every tool."
  />
  <meta property="og:title" content="Contact &amp; Feedback | The Tank Guide" />
  <meta property="og:site_name" content="The Tank Guide" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://thetankguide.com/contact-feedback.html" />
  <meta
    property="og:description"
    content="Reach out with aquarium questions, report logic issues, or highlight anything that looks off in our tools."
  />
  <meta name="twitter:card" content="summary" />
  <link rel="stylesheet" href="css/style.css?v=1.0.9" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-bxKZq4T7xvFeoJEB6Digw1VE3DybZ0SqnX+ANXoy2cuglRez2oJ6TP2PzefDs2fzGEylh4G6dkcnnrIALlTy4g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script defer src="js/nav.js?v=1.1.0"></script>
  <style>
    :root {
      --page-bg-dark: #0f1c2c;
      --page-bg-light: #f4f7fb;
      --card-bg: #f9f9f6;
      --border-color: #c8ced6;
      --text: #1c2733;
      --accent: #2f8f83;
      --accent-focus: #38a3a0;
      --error: #c0392b;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      color: var(--text);
      background: linear-gradient(
        to bottom,
        var(--page-bg-dark) 0%,
        var(--page-bg-dark) 48%,
        var(--page-bg-light) 100%
      );
      min-height: 100vh;
    }

    a {
      color: inherit;
    }

    main.page-wrapper {
      min-height: calc(100vh - 80px);
      padding: 48px 20px 80px;
      display: flex;
      justify-content: center;
    }

    .contact-card {
      background: var(--card-bg);
      border-radius: 18px;
      width: 100%;
      max-width: 760px;
      padding: 48px 48px 56px;
      box-shadow: 0 -18px 36px rgba(15, 28, 44, 0.3), 0 22px 40px rgba(15, 28, 44, 0.08);
    }

    h1 {
      margin: 0 0 24px;
      font-size: clamp(2.25rem, 2vw + 1.25rem, 3rem);
    }

    .intro {
      font-size: 1.05rem;
      line-height: 1.6;
      margin: 0 0 12px;
    }

    .tiny {
      font-size: 0.85rem;
      color: #5d6773;
      margin: 0 0 28px;
    }

    .todo-note {
      margin: 0 0 28px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(240, 173, 0, 0.4);
      background: #fff7dd;
      color: #5d3b00;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .visually-hidden {
      position: absolute !important;
      clip: rect(1px, 1px, 1px, 1px);
      width: 1px;
      height: 1px;
      margin: 0;
      border: 0;
      padding: 0;
      overflow: hidden;
      white-space: nowrap;
    }

    form {
      display: grid;
      gap: 20px;
    }

    fieldset {
      padding: 0;
      margin: 0;
      border: 0;
      display: grid;
      gap: 20px;
    }

    .field-group {
      display: grid;
      gap: 8px;
    }

    label {
      font-weight: 600;
      display: inline-flex;
      align-items: baseline;
      gap: 6px;
    }

    .req {
      color: var(--error);
      font-size: 0.95rem;
      font-weight: 600;
    }

    input[type="text"],
    input[type="email"],
    select,
    textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border-color);
      background: #fff;
      font-size: 1rem;
      color: var(--text);
      transition: border-color 0.18s ease, box-shadow 0.18s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent-focus);
      box-shadow: 0 0 0 3px rgba(56, 163, 160, 0.15);
    }

    textarea {
      min-height: 160px;
      resize: vertical;
    }

    .field-help {
      font-size: 0.9rem;
      color: #5d6773;
      margin: 0;
      display: none;
    }

    .field-help.visible {
      display: block;
      color: var(--error);
    }

    .actions {
      display: flex;
      justify-content: flex-end;
    }

    button[type="submit"] {
      border: none;
      border-radius: 12px;
      padding: 12px 32px;
      font-size: 1rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      background-image: linear-gradient(135deg, #39b385, #2e8a68);
      transition: background-image 0.16s ease, box-shadow 0.16s ease;
    }

    button[type="submit"]:hover,
    button[type="submit"]:focus-visible {
      background-image: linear-gradient(135deg, #2f9c74, #267256);
      box-shadow: 0 0 0 3px rgba(47, 156, 116, 0.35);
    }

    button[aria-disabled="true"] {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .status-stack {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .success,
    .error-summary {
      padding: 16px 20px;
      border-radius: 12px;
      background: #e8f5f2;
      color: #1a4c45;
      border: 1px solid #9fd8cb;
      display: none;
    }

    .success.visible {
      display: block;
    }

    .error-summary {
      background: #fdecea;
      border-color: #f5b1a8;
      color: var(--error);
    }

    .error-summary.visible {
      display: block;
    }

    .error-summary ul {
      margin: 8px 0 0;
      padding-left: 20px;
    }

    @media (max-width: 768px) {
      main.page-wrapper {
        padding: 32px 18px 60px;
      }

      .contact-card {
        padding: 32px 24px 44px;
      }
    }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "@id": "https://thetankguide.com/#organization",
    "name": "FishKeepingLifeCo",
    "alternateName": "The Tank Guide",
    "url": "https://thetankguide.com",
    "addressCountry": "US",
    "addressRegion": "NY",
    "logo": "https://thetankguide.com/logo.png",
    "image": "https://thetankguide.com/logo.png",
    "slogan": "Educational Aquarium Books & Tools",
    "description": "FishKeepingLifeCo publishes educational aquarium books and interactive online tools like The Tank Guide to help aquarists of all experience levels set up, stock, and maintain thriving aquariums.",
    "brand": {
      "@type": "Brand",
      "name": "The Tank Guide"
    },
    "foundingDate": "2025-09-12",
    "publishingPrinciples": "https://thetankguide.com/about.html",
    "areaServed": ["United States", "New York"],
    "knowsAbout": [
      "Aquariums",
      "Fishkeeping",
      "Nitrogen Cycle",
      "Freshwater Aquariums",
      "Planted Tanks",
      "Aquarium Setup Basics",
      "Water Parameters",
      "Aquarium Cycling"
    ],
    "contactPoint": [
      {
        "@type": "ContactPoint",
        "contactType": "customer support",
        "email": "info@thetankguide.com",
        "availableLanguage": ["en"]
      }
    ],
    "sameAs": [
      "https://www.instagram.com/FishKeepingLifeCo",
      "https://www.tiktok.com/@FishKeepingLifeCo",
      "https://www.facebook.com/fishkeepinglifeco",
      "https://x.com/fishkeepinglife?s=21",
      "https://www.youtube.com/@fishkeepinglifeco",
      "https://www.amazon.com/author/fishkeepinglifeco"
    ]
  }
  </script>
  <!-- Consent Mode defaults (load FIRST) -->
  <script src="/assets/js/consent-mode.js" defer></script>
  {% include "includes/ga4.html" %}

  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "YOUR_CLOUDFLARE_TOKEN"}'></script>
  <!-- End Cloudflare Web Analytics -->

  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>
<body>
  <div id="site-nav"></div>
  <main class="page-wrapper">
    <section class="contact-card" aria-labelledby="page-title">
      <div class="status-stack">
        <div role="status" class="success" data-testid="contact-success" tabindex="-1">Thanks! Your message was sent to the team.</div>
        <div role="alert" class="error-summary" data-testid="contact-errors">
          <strong>There’s a bit more to complete:</strong>
          <ul></ul>
        </div>
      </div>
      <h1 id="page-title">Contact &amp; Feedback</h1>
      <p class="intro">Use this form to share feedback, report logic issues, or highlight anything that seems off in our tools.</p>
      <p class="intro">We also welcome aquarium questions so we can point you toward the right resources for your next build.</p>
      <p class="tiny" aria-live="polite">We usually reply within 1–2 business days.</p>
      <form data-testid="contact-form" novalidate>
        <fieldset>
          <legend class="visually-hidden">Contact &amp; Feedback form</legend>
          <div class="field-group">
            <label for="contact-name">Name <span class="req">*Required</span></label>
            <input
              type="text"
              id="contact-name"
              name="name"
              autocomplete="name"
              required
              aria-describedby="help-name"
              data-testid="contact-name"
            />
            <p class="field-help" id="help-name">Please tell us who we should reply to.</p>
          </div>
          <div class="field-group">
            <label for="contact-email">Email <span class="req">*Required</span></label>
            <input
              type="email"
              id="contact-email"
              name="email"
              autocomplete="email"
              required
              aria-describedby="help-email"
              data-testid="contact-email"
            />
            <p class="field-help" id="help-email">Enter a valid email so we can reach you.</p>
          </div>
          <div class="field-group">
            <label for="contact-subject">Subject <span class="req">*Required</span></label>
            <select
              id="contact-subject"
              name="subject"
              required
              aria-describedby="help-subject"
              data-testid="contact-subject"
            >
              <option value="">Select one…</option>
              <option value="feedback">Feedback about a tool</option>
              <option value="logic">Logic or data issue</option>
              <option value="question">Aquarium question</option>
              <option value="suggestion">Suggestion or idea</option>
              <option value="other">Something else</option>
            </select>
            <p class="field-help" id="help-subject">Choose the option that best matches your message.</p>
          </div>
          <div class="field-group">
            <label for="contact-message">Message <span class="req">*Required</span></label>
            <textarea
              id="contact-message"
              name="message"
              required
              aria-describedby="help-message"
              data-testid="contact-message"
            ></textarea>
            <p class="field-help" id="help-message">Let us know the details so we can help quickly.</p>
          </div>
        </fieldset>
        <div class="actions">
          <button type="submit" data-testid="contact-submit">Contact &amp; Feedback</button>
        </div>
      </form>
    </section>
  </main>
  <div id="site-footer"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      window.ttgInitNav?.();
    });

    (async () => {
      try {
        const res = await fetch('/footer.v1.3.0.html?v=1.3.0', { cache: 'no-cache' });
        const html = await res.text();
        const host = document.getElementById('site-footer');
        if (host) {
          host.outerHTML = html;
        }
      } catch (error) {
        console.error('[Footer] load failed:', error);
      }
    })();

    (function () {
      const form = document.querySelector('[data-testid="contact-form"]');
      if (!form) return;

      const successBanner = document.querySelector('[data-testid="contact-success"]');
      const errorSummary = document.querySelector('[data-testid="contact-errors"]');
      const summaryList = errorSummary ? errorSummary.querySelector('ul') : null;
      const errorHeading = errorSummary ? errorSummary.querySelector('strong') : null;
      const defaultErrorHeading = errorHeading?.textContent ?? '';
      const submitButton = form.querySelector('[data-testid="contact-submit"]');
      const LOCAL_STORAGE_KEY = 'ttg.contact.localQueue';
      const FORM_ENDPOINT = 'https://formspree.io/f/xnngnwld';

      const fields = [
        {
          input: document.getElementById('contact-name'),
          helper: document.getElementById('help-name'),
          validate: (value) => value.trim().length > 0,
        },
        {
          input: document.getElementById('contact-email'),
          helper: document.getElementById('help-email'),
          validate: (value) => value.trim().length > 0 && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
        },
        {
          input: document.getElementById('contact-subject'),
          helper: document.getElementById('help-subject'),
          validate: (value) => value.trim().length > 0,
        },
        {
          input: document.getElementById('contact-message'),
          helper: document.getElementById('help-message'),
          validate: (value) => value.trim().length > 0,
        },
      ];

      function setFieldState(field, isValid) {
        if (!field.input) return;
        if (isValid) {
          field.input.removeAttribute('aria-invalid');
          field.helper?.classList.remove('visible');
        } else {
          field.input.setAttribute('aria-invalid', 'true');
          field.helper?.classList.add('visible');
        }
      }

      function hideStatus() {
        if (successBanner) {
          successBanner.classList.remove('visible');
          successBanner.setAttribute('tabindex', '-1');
        }
        if (summaryList) {
          summaryList.innerHTML = '';
        }
        errorSummary?.classList.remove('visible');
        errorSummary?.setAttribute('tabindex', '-1');
        if (errorHeading) {
          errorHeading.textContent = defaultErrorHeading;
        }
      }

      function captureSubmission(entry) {
        if (!entry || typeof entry !== 'object') {
          return;
        }
        try {
          const raw = window.localStorage?.getItem(LOCAL_STORAGE_KEY) ?? '';
          let existing = [];
          if (raw) {
            const parsed = JSON.parse(raw);
            if (Array.isArray(parsed)) {
              existing = parsed;
            }
          }
          existing.unshift(entry);
          if (existing.length > 20) {
            existing.length = 20;
          }
          window.localStorage?.setItem(LOCAL_STORAGE_KEY, JSON.stringify(existing));
        } catch (error) {
          console.warn('Contact capture unavailable', error);
        }
        const queue = Array.isArray(window.__ttgContactQueue) ? window.__ttgContactQueue : [];
        queue.unshift(entry);
        if (queue.length > 20) {
          queue.length = 20;
        }
        window.__ttgContactQueue = queue;
      }

      function showSubmissionError() {
        if (errorHeading) {
          errorHeading.textContent = "We couldn’t send your message right now.";
        }
        if (summaryList) {
          summaryList.innerHTML = '';
          const item = document.createElement('li');
          item.textContent = 'Your message was saved locally. Please try again shortly or email info@thetankguide.com.';
          summaryList.appendChild(item);
        }
        if (errorSummary) {
          errorSummary.classList.add('visible');
          errorSummary.focus({ preventScroll: true });
        }
      }

      fields.forEach((field) => {
        if (!field.input) return;
        const eventName = field.input.tagName === 'SELECT' ? 'change' : 'input';
        field.input.addEventListener(eventName, () => {
          const isValid = field.validate(field.input.value || '');
          setFieldState(field, isValid);
          if (isValid) {
            hideStatus();
          }
        });
      });

      form.addEventListener('submit', async (event) => {
        event.preventDefault();
        hideStatus();

        const invalidFields = [];
        const payload = {};

        fields.forEach((field) => {
          if (!field.input) return;
          const value = field.input.value || '';
          const isValid = field.validate(value);
          setFieldState(field, isValid);
          if (!isValid) {
            invalidFields.push(field);
          }
          const key = field.input.name || field.input.id || 'field';
          payload[key] = value.trim();
        });

        if (invalidFields.length > 0) {
          if (summaryList) {
            summaryList.innerHTML = '';
            invalidFields.forEach((field) => {
              const helperText = field.helper?.textContent?.trim();
              if (!helperText) return;
              const item = document.createElement('li');
              item.textContent = helperText;
              summaryList.appendChild(item);
            });
          }
          errorSummary?.classList.add('visible');
          invalidFields[0]?.input?.focus();
          return;
        }

        const submission = {
          submittedAt: new Date().toISOString(),
          source: 'contact-feedback.html',
          data: payload,
        };

        if (submitButton instanceof HTMLButtonElement) {
          submitButton.setAttribute('aria-disabled', 'true');
          submitButton.disabled = true;
        }

        try {
          const response = await fetch(FORM_ENDPOINT, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              Accept: 'application/json',
            },
            body: JSON.stringify(payload),
          });

          if (!response.ok) {
            throw new Error(`Contact submit failed with status ${response.status}`);
          }

          if (successBanner) {
            successBanner.classList.add('visible');
            successBanner.focus({ preventScroll: true });
          }
          form.reset();
          fields.forEach((field) => {
            if (!field.input) return;
            field.helper?.classList.remove('visible');
            field.input.removeAttribute('aria-invalid');
          });
        } catch (error) {
          console.error('Contact submission failed', error);
          captureSubmission(submission);
          showSubmissionError();
        } finally {
          if (submitButton instanceof HTMLButtonElement) {
            submitButton.disabled = false;
            submitButton.removeAttribute('aria-disabled');
          }
        }
      });
    })();
  </script>
<!-- === TTG Cookie Consent START === -->
<div id="ttg-consent" class="ttg-consent" data-consent-banner>
  <div class="ttg-consent__inner" role="dialog" aria-labelledby="ttg-consent-title" aria-describedby="ttg-consent-desc">
    <h3 id="ttg-consent-title">Cookies & Advertising</h3>
    <p id="ttg-consent-desc">
      We use cookies to run this site and (if you allow) to show relevant ads from Google AdSense. You can accept all cookies, reject personalized ads, or manage preferences anytime.
    </p>
    <div class="ttg-consent__actions">
      <button type="button" class="ttg-btn ttg-btn--secondary js-consent-reject" id="ttg-consent-reject">Reject (Non-personalized)</button>
      <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-manage">Manage</button>
      <button type="button" class="ttg-btn ttg-btn--primary js-consent-accept" id="ttg-consent-accept">Accept All</button>
    </div>
  </div>
</div>

<div id="ttg-consent-modal" class="ttg-consent-modal" hidden aria-modal="true" role="dialog" aria-labelledby="ttg-consent-modal-title">
  <div class="ttg-consent-modal__panel">
    <h3 id="ttg-consent-modal-title">Cookie Preferences</h3>
    <form id="ttg-consent-form">
      <label class="ttg-row">
        <input type="checkbox" checked disabled />
        <span><strong>Essential</strong> — required for core site functions.</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-analytics" />
        <span><strong>Analytics</strong> — understand usage (if enabled later).</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-ads" />
        <span><strong>Advertising</strong> — allow personalized ads (Google AdSense).</span>
      </label>
      <div class="ttg-consent-modal__actions">
        <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-cancel">Cancel</button>
        <button type="submit" class="ttg-btn ttg-btn--primary">Save Preferences</button>
      </div>
    </form>
  </div>
</div>

<!-- === TTG Consent Banner Controller START === -->
  <script defer src="/assets/js/consent-banner.js"></script>
<!-- === TTG Consent Banner Controller END === -->


<!-- === TTG CMP Consent Bridge START === -->
<script>
(function(){
  // Helper: map TCF consent to our single "ads granted" flag.
  // We consider "granted" only when Purpose 1 (storage) AND Purpose 4 (select personalised ads)
  // are consented. If you want to allow NON-personalised ads when only Purpose 1 is granted,
  // set allowNPA=true below.
  var allowNPA = true; // if true, we’ll treat Purpose 1 only as "granted" for showing slots (Google will serve NPA ads).

  function setAdConsent(granted){
    document.documentElement.setAttribute('data-ad-consent', granted ? 'granted' : 'denied');
    document.documentElement.classList.toggle('is-ads-disabled', !granted);
    window.__TTG_ADS_DISABLED__ = !granted;
    // Inform any listeners (our ad loader later)
    window.dispatchEvent(new CustomEvent('ttg:consent-change', {detail:{granted}}));
  }

  // If Google CMP is present, it defines __tcfapi.
  function hookTCF(){
    if (typeof window.__tcfapi !== 'function') return false;

    // Hide our local cookie banner when Google CMP is running (EEA users).
    try{
      var banner = document.getElementById('ttg-consent');
      var modal  = document.getElementById('ttg-consent-modal');
      if (banner){ banner.hidden = true; banner.classList.remove('is-open'); }
      if (modal)  modal.hidden  = true;
    }catch(e){}

    // Listen for consent changes
    window.__tcfapi('addEventListener', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      // Purpose 1 = storage; Purpose 4 = personalised ads
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];

      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    // Also fetch current state once
    window.__tcfapi('getTCData', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];
      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    return true;
  }

  // Try to hook immediately; if CMP loads a bit later, poll briefly
  if (!hookTCF()){
    var tries = 0, t = setInterval(function(){
      tries++;
      if (hookTCF() || tries > 40) clearInterval(t); // up to ~4s
    }, 100);
  }

  // Fallback for non-EEA visitors (no __tcfapi): keep using our local preference
  // Our existing local banner writes ttgConsentV2 with {ads:true|false}.
  // If CMP absent, keep existing behavior (do not force-show anything here).

})();
</script>
<!-- === TTG CMP Consent Bridge END === -->

<!-- === TTG Cookie Consent END === -->

</body>
</html>
