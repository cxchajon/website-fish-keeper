<!-- Updated: Synced gear page with refreshed nav resources and translucent bar styling. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Tank Guide — Gear (Guided)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Build your aquarium setup step by step — tanks, filtration, lighting, and more." />
  <link rel="stylesheet" href="css/style.css?v=1.0.7" />
  <link rel="icon" href="/favicon.ico" />

  <style>
    :root{
      /* switched to dark theme tokens to match params/stocking */
      --fg:#eef3ff;
      --muted:rgba(255,255,255,.85);
      --border:rgba(255,255,255,.14);
      --card-bg:rgba(255,255,255,.08);
      --chip:rgba(255,255,255,.12);
      --ok:#0f9d58;
      --warn:#f4b400;
      --bad:#db4437;
      --ttg-nav-bg: rgba(10, 16, 30, 0.72);
      --ttg-nav-link: rgba(243, 247, 255, 0.85);
    }

    /* gradient background + global text color */
    html,body{
      margin:0;
      padding:0;
      color:var(--fg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }

    .wrap{max-width:1100px;margin:0 auto;padding:0 18px;}
    .hero{padding:56px 0 28px;text-align:center;}
    .hero h1{margin:0 0 8px;}
    .hero p{margin:0;color:var(--muted);}
    .section{margin:32px 0 26px;}
    .section h2{margin:0 0 8px;}
    .section .lead{margin:0 0 16px;color:var(--muted);}
    .card{background:var(--card-bg);backdrop-filter:blur(6px);border:1px solid var(--border);border-radius:12px;padding:16px;}
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));}

    /* softened cards/thumbs for dark background */
    .product{display:grid;gap:8px;border:1px solid var(--border);border-radius:10px;padding:12px;background:rgba(255,255,255,.06);}
    .thumb{width:100%;aspect-ratio:4/3;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:.95rem;text-align:center;padding:6px;}

    .title{font-weight:700;}
    .sub{color:var(--muted);font-size:.95rem;}
    .price{color:var(--muted);}
    .btn{display:inline-block;padding:9px 12px;border:1px solid var(--border);border-radius:10px;text-decoration:none;font-weight:600;background:#fff;}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:10px 0;}
    .chip{background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:.95rem;}
    .muted{color:var(--muted);}
    /* ... rest of your CSS unchanged ... */
  </style>
  <script defer src="js/nav.js?v=1.0.7"></script>
</head>
<body class="page-background theme-dark">

  <div id="global-nav"></div>
  <script>
    fetch('nav.html?v=1.0.7')
      .then(response => response.text())
      .then(html => {
        const mount = document.getElementById('global-nav');
        if (mount) {
          mount.outerHTML = html;
          if (window.initTTGNav) {
            window.initTTGNav();
          }
        }
      });
  </script>

  <!-- Hero -->
  <section class="hero">
    <div class="wrap">
      <h1>Build Your Perfect Setup</h1>
      <p>Based on your stocking, pick a tank, filter, lighting, and essentials — all in one flow.</p>
    </div>
  </section>

  <main class="wrap" id="content">
    <!-- 1) Tank Size -->
    <section class="section" id="tanks">
      <h2>1) Tank Size</h2>
      <p class="lead">Choose a tank that matches the space and bioload you planned in the Stocking Advisor.</p>

      <div class="card">
        <div class="row">
          <label for="tank-size"><strong>Choose size:</strong></label>
          <select id="tank-size" aria-label="Tank size">
            <option value="">-- Select --</option>
            <option>10</option><option>20</option><option>29</option><option>40</option>
            <option>50</option><option>55</option><option>75</option><option>90</option>
            <option>120</option><option>125</option>
          </select>
          <span class="chip" id="size-chip" style="display:none;"></span>
        </div>

        <div id="tank-options" class="grid"></div>

        <div class="compare" id="tank-compare" hidden>
          <table class="compare" aria-label="Compare selected tanks">
            <thead>
              <tr>
                <th>Model</th>
                <th>Type</th>
                <th>Dimensions (L×W×H)</th>
                <th>Footprint (in²)</th>
                <th>Height (in)</th>
                <th>Volume (gal)</th>
                <th>Includes</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="tank-compare-body"></tbody>
          </table>
          <p class="hint">Select up to 3 tanks to compare.</p>
        </div>

        <p class="hint">Tip: longer footprint &gt; taller height for many community fish.</p>
      </div>
    </section>

    <!-- 2) Filtration -->
    <section class="section" id="filtration">
      <h2>2) Filtration</h2>
      <div class="tip">
        <strong>Tip:</strong> For freshwater aquariums, aim for <b>7–10× turnover per hour</b>. We highlight ~<b>8.5×</b> as a sweet spot for clean, stable water with slight overfiltration.
      </div>
      <div class="note">
        <strong>Note:</strong> Bettas and other calm-water species prefer gentle flow. Use <b>sponge filters</b>, <b>spray bars</b>, or <b>baffles</b> to reduce output without sacrificing filtration.
      </div>
      <p class="lead">We show only filters rated for at least your selected tank size.</p>

      <div class="card">
        <div id="filter-options" class="grid"></div>

        <div class="compare" id="filter-compare" hidden>
          <table class="compare" aria-label="Compare selected filters">
            <thead>
              <tr>
                <th>Model</th>
                <th>Type</th>
                <th>Rated Range</th>
                <th>Flow (GPH)</th>
                <th>Turnover (×/hr)</th>
                <th>Media Capacity</th>
                <th>Maintenance</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="filter-compare-body"></tbody>
          </table>
          <p class="hint">Select 2–3 filters to compare. Turnover is calculated from your chosen tank size.</p>
        </div>
      </div>
    </section>

    <!-- 3) Lighting -->
    <section class="section" id="lighting">
      <h2>3) Lighting</h2>
      <div class="tip">
        <strong>Tip:</strong> We recommend <b>stepping up one size</b> above the package rating for your tank length to avoid dim corners and ensure even coverage.
      </div>
      <p class="lead">Pick your plant level; we’ll match lights to your tank length and suggest one size up for coverage.</p>

      <div class="card">
        <div class="row">
          <label for="plant-level"><strong>Plant level:</strong></label>
          <select id="plant-level" aria-label="Plant level">
            <option value="low">Low-light (anubias, java fern, crypts)</option>
            <option value="med" selected>Medium (most stem plants, swords)</option>
            <option value="high">High (carpeting, reds; CO₂ recommended)</option>
          </select>
          <span class="chip" id="length-chip" style="display:none;"></span>
        </div>
        <div id="light-options" class="grid"></div>

        <div class="compare" id="light-compare" hidden>
          <table class="compare" aria-label="Compare selected lights">
            <thead>
              <tr>
                <th>Model</th>
                <th>Length Fit</th>
                <th>Plant Level</th>
                <th>PAR @12"</th>
                <th>Control</th>
                <th>Power (W)</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="light-compare-body"></tbody>
          </table>
          <p class="hint">Select 2–3 lights to compare. We prioritize one size up for coverage.</p>
        </div>
      </div>
    </section>

    <!-- 4) Heating -->
<section class="section" id="heating">
  <h2>4) Heating</h2>
  <div class="tip">
    <strong>Tip:</strong> Freshwater guideline is <b>3–5 W per gallon</b>. We target ~<b>4 W/gal</b> and often suggest <b>two heaters</b> at half wattage each for redundancy.
  </div>
  <div class="card">
    <div class="row">
      <span class="chip" id="heater-target" style="display:none;"></span>
      <span class="chip" id="heater-redundancy" style="display:none;"></span>
    </div>

    <div id="heater-options" class="grid"></div>

    <div class="compare" id="heater-compare" hidden>
      <table class="compare" aria-label="Compare selected heaters">
        <thead>
          <tr>
            <th>Model</th>
            <th>Type</th>
            <th>Wattage</th>
            <th>Rec. Range</th>
            <th>Safety</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody id="heater-compare-body"></tbody>
      </table>
      <p class="hint">Select 2–3 heaters to compare. We highlight matches near the ~4 W/gal target.</p>
    </div>
  </div>
</section>

    <!-- 5) Water Treatment -->
    <section class="section" id="water-treatment">
      <h2>5) Water Treatment</h2>
      <div class="note">
        <strong>Note:</strong> <b>Chloramine-safe</b> dechlorinators neutralize both <b>chlorine</b> and the <b>ammonia</b> in chloramine. Using a chlorine-only product can leave ammonia behind.
      </div>
      <div class="card">
        <p class="muted">Dechlorinator, beneficial bacteria, and conditioners will be listed here with dose guidance.</p>
      </div>
    </section>

    <!-- 6–9 placeholders -->
    <section class="section" id="substrate">
      <h2>6) Substrate</h2>
      <div class="card"><p class="muted">Inert gravel/sand and planted soils — with coverage calculators.</p></div>
    </section>
    <section class="section" id="test-kits">
      <h2>7) Test Kits &amp; Meters</h2>
      <div class="card"><p class="muted">Liquid kits, strips, TDS meters, thermometers.</p></div>
    </section>
    <section class="section" id="hardscape">
      <h2>8) Hardscape &amp; Decor</h2>
      <div class="card"><p class="muted">Woods, stones, safe decor — with pH effect notes.</p></div>
    </section>
    <section class="section" id="maintenance">
      <h2>9) Maintenance Tools</h2>
      <div class="card"><p class="muted">Siphons, scrapers, nets, buckets — the weekly essentials.</p></div>
    </section>

    <!-- 10) Stands & Lids -->
    <section class="section" id="stands-lids">
      <h2>10) Stand &amp; Lid</h2>
      <div class="warning">
        <strong>Warning:</strong> Always choose a <b>stand rated for at least one size larger</b> than your aquarium (e.g., 20 gal tank → 30 gal rated stand). This ensures stability and safety.
      </div>
      <div class="card">
        <p class="muted">We’ll auto-filter stands by footprint and show only those rated above your selected tank size. Lids will be suggested by length fit.</p>
      </div>
    </section>

    <!-- 11) Optional Add-ons -->
    <section class="section" id="add-ons">
      <h2>11) Optional Add-ons</h2>
      <div class="note">
        <strong>Note:</strong> <b>Flow baffles</b> can calm strong filters for fish that prefer gentle water (like bettas). This keeps healthy filtration without stressing your livestock.
      </div>
      <div class="card">
        <div id="addon-options" class="grid"></div>
      </div>
    </section>

    <!-- Cart -->
    <section class="section" id="cart">
      <h2>🛒 Your Cart</h2>
      <div class="card">
        <div class="cart-summary">
          <div><span id="cart-count">0</span> item(s) selected</div>
          <div class="total">Estimated total: $<span id="cart-total">0.00</span></div>
        </div>
        <div class="cart-actions" style="margin-bottom:12px;">
          <button class="ghost-btn" id="cart-buy-all">Buy all</button>
          <button class="ghost-btn" id="cart-clear">Clear cart</button>
        </div>
        <div class="cart-items" id="cart-items"></div>
        <p class="hint">“Buy all” opens each Amazon link in new tabs (some browsers may block popups — please allow them). You can also copy all links.</p>
      </div>
    </section>
  </main>

  <div class="modal-backdrop" id="cart-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="cart-modal-title" hidden>
    <div class="modal">
      <header>
        <h3 id="cart-modal-title">Buy All — Open or Copy Links</h3>
        <button class="ghost-btn" id="cart-modal-close">Close</button>
      </header>
      <div class="list" id="cart-modal-list"></div>
      <p class="hint">Browsers may block multiple popups. Use “Copy all links” if any tabs are prevented from opening.</p>
      <textarea id="cart-modal-textarea" style="width:100%;height:120px;margin-top:8px;" readonly></textarea>
      <p class="muted" id="cart-modal-copy-status" aria-live="polite"></p>
      <div class="actions">
        <button class="btn" id="cart-open-all">Open all</button>
        <button class="btn" id="cart-copy">Copy all links</button>
      </div>
    </div>
  </div>

  <div id="gear-error" class="warning" role="alert" hidden></div>

  <div id="site-footer"></div>
  <script>
    fetch('footer.html?v=1.0.7')
      .then(response => response.text())
      .then(html => {
        const footer = document.getElementById('site-footer');
        if (footer) {
          footer.outerHTML = html;
        }
      });
  </script>

  <script type="module" src="js/gear.js"></script>
</body>
</html>
