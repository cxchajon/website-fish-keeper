:root{
  --gap:12px; --radius:14px;
  --ink:#0f172a; --muted:#475569; --muted-2:#94a3b8;

  --brand:#0284c7; --brand-2:#0369a1;
  --ok:#10b981; --ok-2:#059669;
  --warn:#f59e0b; --warn-2:#d97706;
  --bad:#ef4444; --bad-2:#dc2626;

  --g1:#0ea5e9; --g2:#38bdf8; --g3:#7dd3fc;

  --card:rgba(224,242,254,0.92);
  --card-border:rgba(15,23,42,0.06);

  --field-bg:#fff; --field-bd:#d2dbe6;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:linear-gradient(180deg,var(--g1) 0%,var(--g2) 60%,var(--g3) 100%);
  background-attachment:fixed;
  min-height:100dvh; display:flex; flex-direction:column;
}
.wrap{max-width:1100px;margin:0 auto;padding:28px 20px 72px;width:100%}

.brand{display:flex;flex-direction:column;align-items:flex-start;gap:4px;margin-bottom:8px;color:#fff}
.brand-name{font-size:1.7rem;font-weight:800;line-height:1.2;letter-spacing:.2px;text-shadow:0 2px 14px rgba(2,6,23,.18)}
.brand-sub{font-size:1rem;opacity:.95}
header{margin-bottom:16px;text-align:left;color:#fff}
header h2{margin:0;font-size:1.22rem;font-weight:700;opacity:.98;text-shadow:0 2px 10px rgba(2,6,23,.12)}

.card{
  background:var(--card); border:1px solid var(--card-border);
  border-radius:var(--radius); padding:20px; margin-bottom:20px;
  box-shadow:0 10px 22px -12px rgba(2,6,23,.25);
  backdrop-filter:blur(6px) saturate(140%); -webkit-backdrop-filter:blur(6px) saturate(140%);
  transition:transform .18s ease, box-shadow .18s ease;
}
.card:hover{ transform:translateY(-1px); box-shadow:0 14px 28px -14px rgba(2,6,23,.32); }
.card h2,.card h3{margin:0 0 10px;font-weight:800;letter-spacing:.2px}

label{font-weight:700;margin-bottom:6px;display:block}
input,select{
  width:100%;padding:10px 12px;border:1px solid var(--field-bd);border-radius:10px;background:#fff;
  outline:none; transition:border-color .18s, box-shadow .18s, transform .06s;
}
input:focus,select:focus{
  border-color:#86bdf3; box-shadow:0 0 0 3px rgba(59,130,246,.18);
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }

.row{display:grid;gap:var(--gap);grid-template-columns:repeat(auto-fit,minmax(220px,1fr));align-items:end}

table.stock{width:100%;border-collapse:separate;border-spacing:0 6px}
thead th{padding:8px 6px 10px;text-align:left;font-weight:800;border-bottom:1px solid #cfe7fb66;white-space:nowrap}
thead th.qty{text-align:center;width:90px}
thead th.actions{text-align:right;width:200px}
tbody tr{background:#ffffff; border:1px solid #e7f1fb; box-shadow:0 4px 10px -6px rgba(2,6,23,.1)}
tbody td{padding:12px 10px;vertical-align:middle}
tbody tr:hover{box-shadow:0 6px 14px -8px rgba(2,6,23,.16)}
tbody td:first-child{border-radius:10px 0 0 10px}
tbody td:last-child{border-radius:0 10px 10px 0}

.btn{
  border:none;color:#fff;cursor:pointer;font-weight:800;border-radius:10px;padding:10px 14px;background:var(--brand);
  box-shadow:0 2px 8px rgba(2,6,23,.18);
  transition:transform .06s ease, filter .18s ease, box-shadow .18s ease;
  will-change:transform;
}
.btn:hover{ filter:brightness(1.05); box-shadow:0 6px 14px -8px rgba(2,6,23,.26) }
.btn:active{ transform:translateY(1px) }
#reset.btn{ background:var(--bad) }

/* status strip */
#diag{position:sticky;top:0;z-index:9999;font:12px/1.2 ui-sans-serif,system-ui;display:none}
#diag > div{padding:8px 12px}
#diag.ok{display:block;background:#ecfdf5;color:#065f46;border-bottom:2px solid #a7f3d0}
#diag.err{display:block;background:#fee2e2;color:#7f1d1d;border-bottom:2px solid #fecaca}

/* Bars (restored dotted look + smooth fill) */
.bar{
  position:relative;
  height:22px;
  background:#e2e8f0;
  border-radius:999px;
  overflow:hidden;
}
.bar-fill{
  position:absolute; inset:0;
  width:0%;
  background:linear-gradient(90deg,var(--ok),var(--warn) 60%,var(--bad));
  transition:width .28s ease;
}
.bar::after{
  content:'';
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.35;
  background-image:radial-gradient(rgba(255,255,255,.85) 22%, transparent 23%);
  background-size:12px 12px;
}
.bar-note{display:flex;justify-content:space-between;font-size:.9rem;color:#475569;margin-top:6px}

/* Micro badges */
.note{display:inline-block;color:#475569;background:rgba(255,255,255,.7);padding:6px 8px;border-radius:8px}

/* Footer */
footer{color:#0b3553; text-align:center; padding:14px 0 28px; font-weight:700}

/* Warning bubble groups */
.warning-section + .warning-section { margin-top: 10px; }
.warning-title{ font-weight:800; color:#0f172a; margin-bottom:6px; }
.warning-bubbles{ display:flex; flex-wrap:wrap; gap:8px; }
.warning-bubble{
  padding:6px 10px; border-radius:12px; font-size:.85rem; font-weight:700; color:#fff;
  box-shadow:0 2px 6px rgba(2,6,23,.15); background:#64748b;
}
.warning-bubble strong{ font-weight:800; }
.warning-mild{ background:#facc15; color:#1a1a1a; }
.warning-moderate{ background:#f97316; }
.warning-severe{ background:#dc2626; }
.warning-info{ background:#3b82f6; }

/* Micro-interaction: bar pulse */
@keyframes barPulse{
  0%   { filter:brightness(1); }
  40%  { filter:brightness(1.08); }
  100% { filter:brightness(1); }
}
.bar-fill.pulse{
  animation: barPulse .45s ease-out;
}