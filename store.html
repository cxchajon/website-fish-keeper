<!-- FILE: /store.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Store — The Tank Guide</title>
  <meta name="description" content="Shop books by FishKeepingLifeCo. Purchase Life in Balance: The Hidden Magic of Aquariums on Amazon." />
  <link rel="icon" href="/favicon.ico" />
  <link rel="canonical" href="https://thetankguide.com/store.html" />

  <!-- Site CSS (keep your current version number) -->
  <link rel="stylesheet" href="/css/style.css?v=1.0.9" />
  <script defer src="/js/nav.js?v=1.1.0"></script>

  <!-- Page-scoped styles (do not affect other pages) -->
  <style>
    .store-page { --gap: 1.25rem; --radius: 14px; --wrap: 1040px; }
    .store-wrap { max-width: var(--wrap); margin: 0 auto; padding: 24px 16px 64px; }

    /* Header */
    .store-hero { text-align: left; margin: 0 0 24px; display: grid; gap: 6px; }
    .store-hero .title { font-size: clamp(26px, 3.2vw, 40px); line-height: 1.1; margin: 0; }
    .store-hero .sub { color: #7a8390; font-size: clamp(14px, 1.6vw, 16px); margin: 0; }

    /* Shelf + Product card */
    .shelf { display: grid; gap: var(--gap); }
    .product {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
      background: rgba(255,255,255,0.08);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius);
      padding: 16px;
    }
    .product .media {
      aspect-ratio: 3/4;
      border-radius: calc(var(--radius) - 4px);
      overflow: hidden;
      background: #0e1116;
      display: grid;
      place-items: center;
    }
    .product .media img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .product .details { display: grid; gap: 10px; align-content: start; }
    .product .kicker { letter-spacing: .08em; text-transform: uppercase; font-size: 12px; color: #9aa3af; }
    .product h2 { font-size: clamp(20px, 2.8vw, 28px); margin: 0; line-height: 1.2; }
    .product .desc { color: #c8d0da; font-size: 15px; }
    .product .bullets { margin: 6px 0 0; padding-left: 18px; color: #c8d0da; }
    .product .meta { color: #9aa3af; font-size: 13px; }

    .cta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 6px; }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 11px 16px; border-radius: 12px; font-weight: 600; text-decoration: none;
      border: 1px solid transparent; cursor: pointer;
    }
    .btn.primary { background: #2dd4bf; color: #0b0f14; }
    .btn.primary:hover { filter: brightness(0.95); }
    .btn.secondary { background: transparent; color: #c8d0da; border-color: rgba(255,255,255,0.18); }
    .note { color: #9aa3af; font-size: 12px; margin-top: 4px; }
    .affiliate-disclaimer { margin: 12px 0 0; font-size: 0.9em; color: #9aa3af; }

    /* Responsive: two columns on medium+ */
    @media (min-width: 760px) {
      .product { grid-template-columns: 360px 1fr; padding: 20px; }
    }
    /* Slightly wider wrap on XL */
    @media (min-width: 1200px) { .store-wrap { max-width: 1080px; } }
  </style>

  <!-- JSON-LD (WebPage + Breadcrumbs) -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Store — The Tank Guide",
      "url": "https://thetankguide.com/store.html",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://thetankguide.com/"},
          {"@type": "ListItem", "position": 2, "name": "Store", "item": "https://thetankguide.com/store.html"}
        ]
      }
    }
  </script>
  <!-- Consent Mode defaults (load FIRST) -->
  <script src="/assets/js/consent-mode.js" defer></script>
  <!-- Google tag (gtag.js) — GA4 -->
  <!--#include virtual="/includes/ga4.html" -->

  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "YOUR_CLOUDFLARE_TOKEN"}'></script>
  <!-- End Cloudflare Web Analytics -->

  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>

<body class="store-page">
  <div id="site-nav"></div>
  <div class="store-wrap">
    <!-- Header -->
    <header class="store-hero">
      <h1 class="title">Store</h1>
      <p class="sub">The official store of FishKeepingLifeCo.</p>
    </header>

    <!-- Shelf -->
    <main class="shelf" id="books" aria-label="Books">
      <!-- Product: Life in Balance -->
      <article class="product" itemscope itemtype="https://schema.org/Book">
        <div class="media">
          <img
            src="assets/books/book-cover-web.jpg"
            alt="Book cover: Life in Balance — The Hidden Magic of Aquariums"
            loading="eager" decoding="async" width="1200" height="1600" itemprop="image"
            onerror="this.onerror=null; this.src='assets/books/book-cover-large.jpg';">
        </div>

        <div class="details">
          <div class="kicker">Paperback • 7×10</div>
          <h2 itemprop="name">Life in Balance: The Hidden Magic of Aquariums</h2>

          <p class="desc" itemprop="description">
            Life in Balance: The Hidden Magic of Aquariums is a beginner-friendly aquarium book that explains the nitrogen cycle and the science of fishkeeping. Learn how clean water, beneficial bacteria, and balance keep tropical fish, plants, and shrimp healthy in any freshwater tank. Perfect for kids, families, classrooms, and new hobbyists looking for an easy aquarium guide.
          </p>

          <ul class="bullets">
            <li>Paperback • 7×10 • beginner-friendly aquarium book</li>
            <li>Explains the nitrogen cycle and freshwater tank setup</li>
            <li>Covers tropical fish, live plants, shrimp, and snails</li>
            <li>Teaches fish tank care, water quality, and balance</li>
            <li>Great for families, classrooms, and homeschool science</li>
            <li>A fun fishkeeping guide for kids and new hobbyists</li>
          </ul>

          <div class="meta">Category: Aquariums • Science • Family &amp; Education</div>

          <p class="affiliate-disclaimer">
            <em>As an Amazon Associate, we earn from qualifying purchases.</em>
          </p>

          <div class="cta-row">
            <a class="btn primary" href="https://amzn.to/3IRKvK0" target="_blank" rel="sponsored noopener noreferrer">
              Buy on Amazon
            </a>
          </div>

          <div class="note">Purchases may earn us a small commission at no extra cost to you.</div>
        </div>
      </article>
    </main>
  </div>
<!-- === TTG Cookie Consent START === -->
<div id="ttg-consent" class="ttg-consent" data-consent-banner>
  <div class="ttg-consent__inner" role="dialog" aria-labelledby="ttg-consent-title" aria-describedby="ttg-consent-desc">
    <h3 id="ttg-consent-title">Cookies & Advertising</h3>
    <p id="ttg-consent-desc">
      We use cookies to run this site and (if you allow) to show relevant ads from Google AdSense. You can accept all cookies, reject personalized ads, or manage preferences anytime.
    </p>
    <div class="ttg-consent__actions">
      <button type="button" class="ttg-btn ttg-btn--secondary js-consent-reject" id="ttg-consent-reject">Reject (Non-personalized)</button>
      <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-manage">Manage</button>
      <button type="button" class="ttg-btn ttg-btn--primary js-consent-accept" id="ttg-consent-accept">Accept All</button>
    </div>
  </div>
</div>

<div id="ttg-consent-modal" class="ttg-consent-modal" hidden aria-modal="true" role="dialog" aria-labelledby="ttg-consent-modal-title">
  <div class="ttg-consent-modal__panel">
    <h3 id="ttg-consent-modal-title">Cookie Preferences</h3>
    <form id="ttg-consent-form">
      <label class="ttg-row">
        <input type="checkbox" checked disabled />
        <span><strong>Essential</strong> — required for core site functions.</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-analytics" />
        <span><strong>Analytics</strong> — understand usage (if enabled later).</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-ads" />
        <span><strong>Advertising</strong> — allow personalized ads (Google AdSense).</span>
      </label>
      <div class="ttg-consent-modal__actions">
        <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-cancel">Cancel</button>
        <button type="submit" class="ttg-btn ttg-btn--primary">Save Preferences</button>
      </div>
    </form>
  </div>
</div>

<!-- === TTG Consent Banner Controller START === -->
  <script defer src="/assets/js/consent-banner.js"></script>
<!-- === TTG Consent Banner Controller END === -->


<!-- === TTG CMP Consent Bridge START === -->
<script>
(function(){
  // Helper: map TCF consent to our single "ads granted" flag.
  // We consider "granted" only when Purpose 1 (storage) AND Purpose 4 (select personalised ads)
  // are consented. If you want to allow NON-personalised ads when only Purpose 1 is granted,
  // set allowNPA=true below.
  var allowNPA = true; // if true, we’ll treat Purpose 1 only as "granted" for showing slots (Google will serve NPA ads).

  function setAdConsent(granted){
    document.documentElement.setAttribute('data-ad-consent', granted ? 'granted' : 'denied');
    document.documentElement.classList.toggle('is-ads-disabled', !granted);
    window.__TTG_ADS_DISABLED__ = !granted;
    // Inform any listeners (our ad loader later)
    window.dispatchEvent(new CustomEvent('ttg:consent-change', {detail:{granted}}));
  }

  // If Google CMP is present, it defines __tcfapi.
  function hookTCF(){
    if (typeof window.__tcfapi !== 'function') return false;

    // Hide our local cookie banner when Google CMP is running (EEA users).
    try{
      var banner = document.getElementById('ttg-consent');
      var modal  = document.getElementById('ttg-consent-modal');
      if (banner){ banner.hidden = true; banner.classList.remove('is-open'); }
      if (modal)  modal.hidden  = true;
    }catch(e){}

    // Listen for consent changes
    window.__tcfapi('addEventListener', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      // Purpose 1 = storage; Purpose 4 = personalised ads
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];

      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    // Also fetch current state once
    window.__tcfapi('getTCData', 2, function(tcData, ok){
      if(!ok || !tcData) return;
      var p = (tcData.purpose && tcData.purpose.consents) || {};
      var hasP1 = !!p[1];
      var hasP4 = !!p[4];
      var granted = allowNPA ? hasP1 : (hasP1 && hasP4);
      setAdConsent(granted);
    });

    return true;
  }

  // Try to hook immediately; if CMP loads a bit later, poll briefly
  if (!hookTCF()){
    var tries = 0, t = setInterval(function(){
      tries++;
      if (hookTCF() || tries > 40) clearInterval(t); // up to ~4s
    }, 100);
  }

  // Fallback for non-EEA visitors (no __tcfapi): keep using our local preference
  // Our existing local banner writes ttgConsentV2 with {ads:true|false}.
  // If CMP absent, keep existing behavior (do not force-show anything here).

})();
</script>
<!-- === TTG CMP Consent Bridge END === -->

<!-- === TTG Cookie Consent END === -->

  <script src="/js/footer-loader.js?v=1.4.5" defer></script>
  <div id="site-footer" data-footer-src="/footer.html?v=1.4.5"></div>
</body>
</html>
