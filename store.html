<!-- FILE: /store.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Store — The Tank Guide</title>
  <meta name="description" content="Shop books by FishKeepingLifeCo. Purchase Life in Balance: The Hidden Magic of Aquariums on Amazon." />
  <link rel="icon" href="/favicon.ico" />
  <link rel="canonical" href="https://thetankguide.com/store.html" />

  <!-- Site CSS (keep your current version number) -->
  <link rel="stylesheet" href="/css/style.css?v=1.0.9" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script defer src="/js/nav.js?v=1.1.0"></script>

  <!-- Page-scoped styles (do not affect other pages) -->
  <style>
    .store-page { --gap: 1.25rem; --radius: 14px; --wrap: 1040px; }
    .store-wrap { max-width: var(--wrap); margin: 0 auto; padding: 24px 16px 64px; }

    /* Header */
    .store-hero { text-align: left; margin: 0 0 24px; display: grid; gap: 6px; }
    .store-hero .title { font-size: clamp(26px, 3.2vw, 40px); line-height: 1.1; margin: 0; }
    .store-hero .sub { color: #7a8390; font-size: clamp(14px, 1.6vw, 16px); margin: 0; }

    /* Shelf + Product card */
    .shelf { display: grid; gap: var(--gap); }
    .product {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
      background: rgba(255,255,255,0.08);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius);
      padding: 16px;
    }
    .product .media {
      aspect-ratio: 3/4;
      border-radius: calc(var(--radius) - 4px);
      overflow: hidden;
      background: #0e1116;
      display: grid;
      place-items: center;
    }
    .product .media img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .product .details { display: grid; gap: 10px; align-content: start; }
    .product .kicker { letter-spacing: .08em; text-transform: uppercase; font-size: 12px; color: #9aa3af; }
    .product h2 { font-size: clamp(20px, 2.8vw, 28px); margin: 0; line-height: 1.2; }
    .product .desc { color: #c8d0da; font-size: 15px; }
    .product .bullets { margin: 6px 0 0; padding-left: 18px; color: #c8d0da; }
    .product .meta { color: #9aa3af; font-size: 13px; }

    .cta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 6px; }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 11px 16px; border-radius: 12px; font-weight: 600; text-decoration: none;
      border: 1px solid transparent; cursor: pointer;
    }
    .btn.primary { background: #2dd4bf; color: #0b0f14; }
    .btn.primary:hover { filter: brightness(0.95); }
    .btn.secondary { background: transparent; color: #c8d0da; border-color: rgba(255,255,255,0.18); }
    .note { color: #9aa3af; font-size: 12px; margin-top: 4px; }

    /* Responsive: two columns on medium+ */
    @media (min-width: 760px) {
      .product { grid-template-columns: 360px 1fr; padding: 20px; }
    }
    /* Slightly wider wrap on XL */
    @media (min-width: 1200px) { .store-wrap { max-width: 1080px; } }
  </style>

  <!-- JSON-LD (WebPage + Breadcrumbs) -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Store — The Tank Guide",
      "url": "https://thetankguide.com/store.html",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://thetankguide.com/"},
          {"@type": "ListItem", "position": 2, "name": "Store", "item": "https://thetankguide.com/store.html"}
        ]
      }
    }
  </script>
</head>

<body class="store-page">
  <div id="site-nav"></div>
  <div class="store-wrap">
    <!-- Header -->
    <header class="store-hero">
      <h1 class="title">Store</h1>
      <p class="sub">The official store of FishKeepingLifeCo.</p>
    </header>

    <!-- Shelf -->
    <main class="shelf" id="books" aria-label="Books">
      <!-- Product: Life in Balance -->
      <article class="product" itemscope itemtype="https://schema.org/Book">
        <div class="media">
          <img
            src="assets/books/book-cover-web.jpg"
            alt="Book cover: Life in Balance — The Hidden Magic of Aquariums"
            loading="eager" decoding="async" width="1200" height="1600" itemprop="image"
            onerror="this.onerror=null; this.src='assets/books/book-cover-large.jpg';">
        </div>

        <div class="details">
          <div class="kicker">Paperback • 7×10</div>
          <h2 itemprop="name">Life in Balance: The Hidden Magic of Aquariums</h2>

          <p class="desc" itemprop="description">
            Life in Balance: The Hidden Magic of Aquariums is a beginner-friendly aquarium book that explains the nitrogen cycle and the science of fishkeeping. Learn how clean water, beneficial bacteria, and balance keep tropical fish, plants, and shrimp healthy in any freshwater tank. Perfect for kids, families, classrooms, and new hobbyists looking for an easy aquarium guide.
          </p>

          <ul class="bullets">
            <li>Paperback • 7×10 • beginner-friendly aquarium book</li>
            <li>Explains the nitrogen cycle and freshwater tank setup</li>
            <li>Covers tropical fish, live plants, shrimp, and snails</li>
            <li>Teaches fish tank care, water quality, and balance</li>
            <li>Great for families, classrooms, and homeschool science</li>
            <li>A fun fishkeeping guide for kids and new hobbyists</li>
          </ul>

          <div class="meta">Category: Aquariums • Science • Family &amp; Education</div>

          <div class="cta-row">
            <a class="btn primary" href="https://amzn.to/3Kh34I1" target="_blank" rel="sponsored noopener noreferrer">
              Buy on Amazon
            </a>
          </div>

          <div class="note">Purchases may earn us a small commission at no extra cost to you.</div>
        </div>
      </article>
    </main>
  </div>

  <div id="site-footer"></div>
  <script>
(async () => {
  try {
    const res = await fetch('/footer.v1.3.0.html?v=1.3.0', { cache: 'no-cache' });
    const html = await res.text();
    const host = document.getElementById('site-footer');
    if (host) host.outerHTML = html;
  } catch (e) { console.error('[Footer] load failed:', e); }
})();
  </script>
<!-- === TTG Cookie Consent START === -->
<div id="ttg-consent" class="ttg-consent" hidden>
  <div class="ttg-consent__inner" role="dialog" aria-labelledby="ttg-consent-title" aria-describedby="ttg-consent-desc">
    <h3 id="ttg-consent-title">Cookies & Advertising</h3>
    <p id="ttg-consent-desc">
      We use cookies to run this site and (if you allow) to show relevant ads from Google AdSense. You can accept all cookies, reject personalized ads, or manage preferences anytime.
    </p>
    <div class="ttg-consent__actions">
      <button type="button" class="ttg-btn ttg-btn--secondary" id="ttg-consent-reject">Reject (Non-personalized)</button>
      <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-manage">Manage</button>
      <button type="button" class="ttg-btn ttg-btn--primary" id="ttg-consent-accept">Accept All</button>
    </div>
  </div>
</div>

<div id="ttg-consent-modal" class="ttg-consent-modal" hidden aria-modal="true" role="dialog" aria-labelledby="ttg-consent-modal-title">
  <div class="ttg-consent-modal__panel">
    <h3 id="ttg-consent-modal-title">Cookie Preferences</h3>
    <form id="ttg-consent-form">
      <label class="ttg-row">
        <input type="checkbox" checked disabled />
        <span><strong>Essential</strong> — required for core site functions.</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-analytics" />
        <span><strong>Analytics</strong> — understand usage (if enabled later).</span>
      </label>
      <label class="ttg-row">
        <input type="checkbox" id="ttg-c-ads" />
        <span><strong>Advertising</strong> — allow personalized ads (Google AdSense).</span>
      </label>
      <div class="ttg-consent-modal__actions">
        <button type="button" class="ttg-btn ttg-btn--ghost" id="ttg-consent-cancel">Cancel</button>
        <button type="submit" class="ttg-btn ttg-btn--primary">Save Preferences</button>
      </div>
    </form>
  </div>
</div>

<!-- === TTG Cookie Consent SCRIPT (checkbox fix + status) START === -->
<script>
(function(){
  const KEY = 'ttg.consent.v1';

  const $banner = document.getElementById('ttg-consent');
  const $modal  = document.getElementById('ttg-consent-modal');
  const $btnAccept = document.getElementById('ttg-consent-accept');
  const $btnReject = document.getElementById('ttg-consent-reject');
  const $btnManage = document.getElementById('ttg-consent-manage');
  const $btnCancel = document.getElementById('ttg-consent-cancel');
  const $form = document.getElementById('ttg-consent-form');

  // Checkboxes
  const $rows        = $form ? $form.querySelectorAll('.ttg-row') : [];
  const $ckEssential = $rows[0] ? $rows[0].querySelector('input[type="checkbox"]') : null;
  const $ckAnalytics = document.getElementById('ttg-c-analytics');
  const $ckAds       = document.getElementById('ttg-c-ads');

  // Add a small status line so you can verify state visually
  let $status = $form ? $form.querySelector('.ttg-consent-status') : null;
  if ($form && !$status){
    $status = document.createElement('p');
    $status.className = 'ttg-consent-status';
    $form.appendChild($status);
  }

  function updateStatus(){
    if(!$status) return;
    const a = $ckAnalytics && $ckAnalytics.checked ? 'ON' : 'OFF';
    const d = $ckAds && $ckAds.checked ? 'ON' : 'OFF';
    $status.textContent = `Current: Analytics ${a} • Advertising ${d}`;
  }

  function save(state){
    localStorage.setItem(KEY, JSON.stringify(state));
    document.documentElement.setAttribute('data-ad-consent', state.ads ? 'granted' : 'denied');
  }
  function load(){
    try { return JSON.parse(localStorage.getItem(KEY) || ''); } catch(e){ return null; }
  }
  function openBanner(){ if ($banner) $banner.hidden = false; }
  function closeBanner(){ if ($banner) $banner.hidden = true; }
  function openModal(){
    if(!$modal) return;
    $modal.hidden = false;

    // Essential MUST be checked & disabled
    if ($ckEssential){
      $ckEssential.checked = true;
      $ckEssential.disabled = true;
    }

    const s = load() || {analytics:false, ads:false};
    if ($ckAnalytics) $ckAnalytics.checked = !!s.analytics;
    if ($ckAds)       $ckAds.checked = !!s.ads;
    updateStatus();
  }
  function closeModal(){ if($modal) $modal.hidden = true; }

  // Ensure modal hidden initially
  closeModal();

  const state = load();
  if (!state){
    // First visit: banner only
    openBanner();
  } else {
    save(state);
    closeBanner(); closeModal();
  }

  // Wire up clicks on the whole row to toggle the checkbox (except Essential)
  $rows.forEach(function(row, idx){
    row.addEventListener('click', function(e){
      const cb = row.querySelector('input[type="checkbox"]');
      if (!cb) return;
      if (idx === 0) return; // Essential: no toggle
      if (e.target.tagName.toLowerCase() !== 'input'){
        cb.checked = !cb.checked;
        updateStatus();
      }
    });
  });
  if ($ckAnalytics) $ckAnalytics.addEventListener('change', updateStatus);
  if ($ckAds)       $ckAds.addEventListener('change', updateStatus);

  // Buttons
  if ($btnAccept) $btnAccept.addEventListener('click', function(){
    save({ essential:true, analytics:true, ads:true, ts:Date.now() });
    closeModal(); closeBanner();
  });
  if ($btnReject) $btnReject.addEventListener('click', function(){
    save({ essential:true, analytics:false, ads:false, ts:Date.now() });
    closeModal(); closeBanner();
  });
  if ($btnManage) $btnManage.addEventListener('click', openModal);
  if ($btnCancel) $btnCancel.addEventListener('click', closeModal);

  if ($form) $form.addEventListener('submit', function(e){
    e.preventDefault();
    save({
      essential: true,
      analytics: $ckAnalytics ? !!$ckAnalytics.checked : false,
      ads:       $ckAds ? !!$ckAds.checked : false,
      ts: Date.now()
    });
    closeModal(); closeBanner();
  });

  // Close modal on outside click
  if ($modal) $modal.addEventListener('click', function(e){
    if (e.target === $modal) closeModal();
  });

  // Close on Escape
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && $modal && !$modal.hidden) closeModal();
  });

  // Guard for ad scripts
  if (document.documentElement.getAttribute('data-ad-consent') !== 'granted'){
    window.__TTG_ADS_DISABLED__ = true;
  }

  // Public API for footer link
  window.cookieConsent = {
    open: function(){ openModal(); },
    reset: function(){ localStorage.removeItem(KEY); closeModal(); openBanner(); }
  };
})();
</script>
<!-- === TTG Cookie Consent SCRIPT (checkbox fix + status) END === -->

<!-- === TTG Cookie Consent END === -->

</body>
</html>
