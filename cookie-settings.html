<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KTRVCMQN');</script>
  <!-- End Google Tag Manager -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta name="twitter:image:alt" content="FishKeepingLifeCo logo (1200×630)." />
  <meta property="og:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="FishKeepingLifeCo logo (1200×630)." />
  <link rel="preload" href="/footer.html?v=1.5.2" as="fetch" crossorigin="anonymous">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cookie Settings — The Tank Guide</title>
  <meta name="description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/logos/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/logos/favicon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/Logo-Master-180x180.PNG">
  <link rel="apple-touch-icon" sizes="512x512" href="/assets/img/Logo-Master-512x512.PNG">

  <meta property="og:site_name" content="The Tank Guide">
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Cookie Settings — The Tank Guide" />
  <meta property="og:description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <meta property="og:url" content="https://thetankguide.com/cookie-settings.html" />
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://thetankguide.com/#organization",
        "name": "FishKeepingLifeCo",
        "description": "FishKeepingLifeCo is an educational publishing brand that creates aquarium books, journals, guides, and tools, including The Tank Guide website and its interactive resources.",
        "url": "https://thetankguide.com/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://thetankguide.com/assets/img/logos/logo-1200x630.png",
          "width": 1200,
          "height": 630
        },
        "sameAs": [
          "https://x.com/FishKeepingLife",
          "https://www.instagram.com/FishKeepingLifeCo",
          "https://www.tiktok.com/@FishKeepingLifeCo",
          "https://www.facebook.com/fishkeepinglifeco",
          "https://www.youtube.com/@fishkeepinglifeco"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://thetankguide.com/#website",
        "url": "https://thetankguide.com/",
        "name": "The Tank Guide",
        "description": "The Tank Guide is an educational aquarium website from FishKeepingLifeCo, offering tools, guides, and beginner friendly resources.",
        "publisher": { "@id": "https://thetankguide.com/#organization" },
        "inLanguage": "en-US",
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://thetankguide.com/search?q={search_term_string}"
          },
          "query-input": {
            "@type": "PropertyValueSpecification",
            "valueRequired": true,
            "valueName": "search_term_string"
          }
        }
      },
      {
        "@type": "WebPage",
        "@id": "https://thetankguide.com/cookie-settings.html#webpage",
        "url": "https://thetankguide.com/cookie-settings.html",
        "name": "Cookie Settings — The Tank Guide",
        "description": "Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime.",
        "inLanguage": "en-US",
        "isPartOf": { "@id": "https://thetankguide.com/#website" },
        "publisher": { "@id": "https://thetankguide.com/#organization" }
      }
    ]
  }
  </script>
  <link rel="canonical" href="https://thetankguide.com/cookie-settings.html" />
  <meta name="robots" content="noindex,nofollow" />
  <meta name="twitter:url" content="https://thetankguide.com/cookie-settings.html" />
  <meta name="twitter:title" content="Cookie Settings — The Tank Guide" />
  <meta name="twitter:description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <link rel="stylesheet" href="/css/style.css?v=1.0.10" />
  <script defer src="/js/nav.js?v=1.1.0"></script>
  <style>
    body.theme-light { background: radial-gradient(circle at top, rgba(15,51,82,.9), rgba(7,18,32,1)); color: #fff; }
    main.cookie-settings { max-width: 720px; margin: 0 auto; padding: 72px 20px 96px; text-align: left; }
    .cookie-settings h1 { margin: 0 0 12px; font-size: clamp(32px, 4vw, 44px); }
    .cookie-settings h2 { margin: 32px 0 16px; font-size: clamp(24px, 3vw, 28px); }
    .cookie-settings p { margin: 0 0 16px; line-height: 1.6; color: rgba(255,255,255,.88); }
    .cookie-settings a { color: #fff; font-weight: 700; text-decoration: underline; }
    .cookie-settings a:hover,
    .cookie-settings a:focus-visible { color: #fff; text-decoration: underline; }

    .cookie-categories { margin: 24px 0; }
    .cookie-category { background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.15); border-radius: 12px; padding: 16px 20px; margin-bottom: 12px; }
    .cookie-category-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
    .cookie-category h3 { margin: 0; font-size: 18px; font-weight: 600; }
    .cookie-category p { margin: 0; font-size: 14px; color: rgba(255,255,255,.7); }

    .toggle-switch { position: relative; display: inline-block; width: 48px; height: 24px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255,255,255,.2); transition: .3s; border-radius: 24px; }
    .toggle-slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%; }
    input:checked + .toggle-slider { background-color: #4CAF50; }
    input:checked + .toggle-slider:before { transform: translateX(24px); }
    input:disabled + .toggle-slider { cursor: not-allowed; opacity: 0.5; }
    .toggle-switch:has(input:focus-visible) .toggle-slider { outline: 2px solid #fff; outline-offset: 2px; }

    .cookie-actions { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 24px; }
    .cookie-actions button { border-radius: 12px; border: 1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.08); color: #fff; padding: 12px 18px; font-weight: 600; cursor: pointer; font-size: 15px; transition: background .2s; }
    .cookie-actions button:hover { background: rgba(255,255,255,.16); }
    .cookie-actions button:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }
    .cookie-actions button.primary { background: rgba(76,175,80,.3); border-color: rgba(76,175,80,.5); }
    .cookie-actions button.primary:hover { background: rgba(76,175,80,.4); }
    .save-status { margin-top: 12px; padding: 12px; background: rgba(76,175,80,.2); border: 1px solid rgba(76,175,80,.4); border-radius: 8px; font-size: 14px; display: none; }
    .save-status.show { display: block; }
  </style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PTHZ5NZFVJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PTHZ5NZFVJ');
</script>
  <!-- Consent Mode defaults (runs after GA loader) -->
  <script src="/assets/js/consent-mode.js" defer></script>

  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "fef22cbf19e3473db5ec987a8f3bf4f3"}'></script>
  <!-- End Cloudflare Web Analytics -->

  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <script>
    // IAB TCF v2.2 stub to allow __tcfapi interactions
    (function() {
      var TCF_LOCATOR_NAME = '__tcfapiLocator';
      var queue = [];
      var win = window;
      var cmpFrame;

      function addFrame() {
        if (!win.frames[TCF_LOCATOR_NAME]) {
          if (document.body) {
            cmpFrame = document.createElement('iframe');
            cmpFrame.style.cssText = 'display:none';
            cmpFrame.name = TCF_LOCATOR_NAME;
            document.body.appendChild(cmpFrame);
          } else {
            setTimeout(addFrame, 5);
          }
        }
      }

      function tcfAPIHandler() {
        var gdprApplies;
        var args = arguments;

        if (!args.length) {
          return queue;
        }

        if (args[0] === 'setGdprApplies') {
          gdprApplies = args[1];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        } else if (args[0] === 'ping') {
          var retr = {
            gdprApplies: gdprApplies,
            cmpLoaded: false,
            cmpStatus: 'stub'
          };
          if (typeof args[2] === 'function') {
            args[2](retr);
          }
        } else {
          queue.push(args);
        }
      }

      function postMessageEventHandler(event) {
        var msgIsString = typeof event.data === 'string';
        var json = {};

        try {
          json = msgIsString ? JSON.parse(event.data) : event.data;
        } catch (ignore) {}

        var payload = json.__tcfapiCall;

        if (payload) {
          window.__tcfapi(payload.command, payload.version, function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            event.source.postMessage(returnMsg, '*');
          }, payload.parameter);
        }
      }

      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    })();
  </script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>
<body class="theme-light">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTRVCMQN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div id="site-nav"></div>
  <main class="cookie-settings" aria-labelledby="cookie-settings-title">
    <h1 id="cookie-settings-title">Cookie Settings</h1>
    <p>Manage your cookie and privacy preferences for The Tank Guide. Essential cookies are always active to ensure the site functions properly. You can control optional cookies below.</p>

    <div class="cookie-categories">
      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3>Strictly Necessary</h3>
          <label class="toggle-switch">
            <input type="checkbox" id="cookie-necessary" checked disabled aria-label="Strictly necessary cookies (always enabled)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p>Essential cookies required for the site to function. These cannot be disabled.</p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3>Analytics</h3>
          <label class="toggle-switch">
            <input type="checkbox" id="cookie-analytics" aria-label="Analytics cookies">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p>Helps us understand how visitors interact with our site by collecting anonymized data.</p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3>Advertising & Personalization</h3>
          <label class="toggle-switch">
            <input type="checkbox" id="cookie-advertising" aria-label="Advertising and personalization cookies">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p>Used to show relevant ads and personalized content based on your interests.</p>
      </div>
    </div>

    <div class="cookie-actions">
      <button type="button" id="save-settings-btn" class="primary">Save settings</button>
      <button type="button" id="allow-all-btn">Allow all</button>
      <button type="button" id="reject-optional-btn">Reject non-essential</button>
    </div>

    <div id="save-status" class="save-status" role="status" aria-live="polite"></div>

    <section id="do-not-sell" aria-labelledby="do-not-sell-heading">
      <h2 id="do-not-sell-heading">Do Not Sell or Share My Personal Information</h2>
      <p>
        The Tank Guide does not sell personal data. You can opt out of personalized advertising by disabling
        <strong>Advertising &amp; Personalization</strong> above and clicking <strong>Save settings</strong>, or by emailing
        <a href="mailto:privacy@thetankguide.com">privacy@thetankguide.com</a> with the subject "Do Not Sell or Share."
      </p>
      <p>
        We honor Global Privacy Control (GPC) signals and apply your consent choices across all browsers signed in with your
        account. For additional privacy questions, contact <a href="/contact-feedback.html">Contact &amp; Feedback</a>.
      </p>
    </section>
  </main>
<script>
  (function() {
    'use strict';

    function log(msg, data) {
      try {
        console.log('[cookie-settings]', msg, data || '');
      } catch (e) {}
    }

    function showStatus(message, duration) {
      var status = document.getElementById('save-status');
      if (!status) return;
      status.textContent = message;
      status.classList.add('show');
      setTimeout(function() {
        status.classList.remove('show');
      }, duration || 3000);
    }

    function getConsentFromToggles() {
      return {
        analytics: document.getElementById('cookie-analytics').checked,
        advertising: document.getElementById('cookie-advertising').checked
      };
    }

    function updateTogglesFromConsent(consent) {
      var analyticsEl = document.getElementById('cookie-analytics');
      var advertisingEl = document.getElementById('cookie-advertising');

      if (!consent) {
        // Privacy-first defaults when no saved preference exists
        analyticsEl.checked = false;
        advertisingEl.checked = false;
        return;
      }

      // Check both boolean and string formats for compatibility
      var analyticsGranted = consent.analytics === true || consent.analytics_storage === 'granted';
      var advertisingGranted = consent.advertising === true || consent.ad_storage === 'granted';

      analyticsEl.checked = analyticsGranted;
      advertisingEl.checked = advertisingGranted;
    }

    function saveConsent(prefs) {
      // Use the shared consent API from consent-mode.js
      if (window.ttgConsent && typeof window.ttgConsent.updateConsentFromToggles === 'function') {
        window.ttgConsent.updateConsentFromToggles(prefs);
        log('consent saved via shared API');
        return true;
      }
      log('error: consent API not available');
      return false;
    }

    function handleSaveSettings() {
      log('save settings clicked');
      var prefs = getConsentFromToggles();
      if (saveConsent(prefs)) {
        showStatus('Your preferences have been saved.');
      } else {
        showStatus('Error saving preferences. Please refresh and try again.');
      }
    }

    function handleAllowAll() {
      log('allow all clicked');
      document.getElementById('cookie-analytics').checked = true;
      document.getElementById('cookie-advertising').checked = true;

      var prefs = getConsentFromToggles();
      if (saveConsent(prefs)) {
        showStatus('All cookies enabled and saved.');
      } else {
        showStatus('Error saving preferences. Please refresh and try again.');
      }
    }

    function handleRejectOptional() {
      log('reject non-essential clicked');
      document.getElementById('cookie-analytics').checked = false;
      document.getElementById('cookie-advertising').checked = false;

      var prefs = getConsentFromToggles();
      if (saveConsent(prefs)) {
        showStatus('Only essential cookies are enabled.');
      } else {
        showStatus('Error saving preferences. Please refresh and try again.');
      }
    }

    function init() {
      log('initializing cookie settings page');

      // Check that consent API is available (consent-mode.js should have loaded)
      if (!window.ttgConsent || typeof window.ttgConsent.readConsent !== 'function') {
        log('error: consent API not available, cannot initialize');
        return;
      }

      // Load saved consent using the shared API
      var saved = window.ttgConsent.readConsent();
      updateTogglesFromConsent(saved);

      if (saved) {
        log('loaded saved preferences:', {
          analytics: saved.analytics,
          advertising: saved.advertising
        });
      } else {
        log('no saved preferences found, using privacy-first defaults (all denied)');
      }

      // Wire up button handlers
      document.getElementById('save-settings-btn').addEventListener('click', handleSaveSettings);
      document.getElementById('allow-all-btn').addEventListener('click', handleAllowAll);
      document.getElementById('reject-optional-btn').addEventListener('click', handleRejectOptional);

      log('event listeners wired');
    }

    // Always wait for DOMContentLoaded to ensure consent-mode.js has executed
    // (consent-mode.js uses defer, so it runs after parsing but before DOMContentLoaded)
    document.addEventListener('DOMContentLoaded', init);
  })();
</script>
  <script src="/js/footer-loader.js?v=1.5.2" defer></script>
  <section class="legal-links" aria-label="Site legal links">
    <a href="/privacy-legal.html">Privacy Policy</a>
    <a href="/terms.html">Terms</a>
    <a href="/contact-feedback.html">Contact</a>
  </section>
  <noscript>
    <section class="legal-links" aria-label="Site legal links (noscript)">
      <a href="/privacy-legal.html">Privacy Policy</a>
      <a href="/terms.html">Terms</a>
      <a href="/contact-feedback.html">Contact</a>
    </section>
  </noscript>

  <div id="site-footer" data-footer-src="/footer.html?v=1.5.2"></div>
</body>
</html>
