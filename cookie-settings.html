<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta name="twitter:image:alt" content="FishKeepingLifeCo logo (1200×630)." />
  <meta property="og:image" content="https://thetankguide.com/assets/img/logos/logo-1200x630.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="FishKeepingLifeCo logo (1200×630)." />
  <link rel="preload" href="/footer.html?v=1.5.2" as="fetch" crossorigin="anonymous">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cookie Settings — The Tank Guide</title>
  <meta name="description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/logos/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/logos/favicon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/Logo-Master-180x180.PNG">
  <link rel="apple-touch-icon" sizes="512x512" href="/assets/img/Logo-Master-512x512.PNG">

  <meta property="og:site_name" content="The Tank Guide">
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Cookie Settings — The Tank Guide" />
  <meta property="og:description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <meta property="og:url" content="https://thetankguide.com/cookie-settings.html" />
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://thetankguide.com/#organization",
        "name": "FishKeepingLifeCo",
        "description": "FishKeepingLifeCo is an educational publishing brand that creates aquarium books, journals, guides, and tools, including The Tank Guide website and its interactive resources.",
        "url": "https://thetankguide.com/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://thetankguide.com/assets/img/logos/logo-1200x630.png",
          "width": 1200,
          "height": 630
        },
        "sameAs": [
          "https://x.com/FishKeepingLife",
          "https://www.instagram.com/FishKeepingLifeCo",
          "https://www.tiktok.com/@FishKeepingLifeCo",
          "https://www.facebook.com/fishkeepinglifeco",
          "https://www.youtube.com/@fishkeepinglifeco"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://thetankguide.com/#website",
        "url": "https://thetankguide.com/",
        "name": "The Tank Guide",
        "description": "The Tank Guide is an educational aquarium website from FishKeepingLifeCo, offering tools, guides, and beginner friendly resources.",
        "publisher": { "@id": "https://thetankguide.com/#organization" },
        "inLanguage": "en-US",
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://thetankguide.com/search?q={search_term_string}"
          },
          "query-input": {
            "@type": "PropertyValueSpecification",
            "valueRequired": true,
            "valueName": "search_term_string"
          }
        }
      },
      {
        "@type": "WebPage",
        "@id": "https://thetankguide.com/cookie-settings.html#webpage",
        "url": "https://thetankguide.com/cookie-settings.html",
        "name": "Cookie Settings — The Tank Guide",
        "description": "Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime.",
        "inLanguage": "en-US",
        "isPartOf": { "@id": "https://thetankguide.com/#website" },
        "publisher": { "@id": "https://thetankguide.com/#organization" }
      }
    ]
  }
  </script>
  <link rel="canonical" href="https://thetankguide.com/cookie-settings.html" />
  <meta name="robots" content="noindex,nofollow" />
  <meta name="twitter:url" content="https://thetankguide.com/cookie-settings.html" />
  <meta name="twitter:title" content="Cookie Settings — The Tank Guide" />
  <meta name="twitter:description" content="Manage your cookie preferences for The Tank Guide. Update consent for analytics and advertising cookies anytime." />
  <link rel="stylesheet" href="/css/style.css?v=1.0.10" />
  <script defer src="/js/nav.js?v=1.1.0"></script>
  <style>
    body.theme-light { background: radial-gradient(circle at top, rgba(15,51,82,.9), rgba(7,18,32,1)); color: #fff; }
    main.cookie-settings { max-width: 720px; margin: 0 auto; padding: 72px 20px 96px; text-align: left; }
    .cookie-settings h1 { margin: 0 0 12px; font-size: clamp(32px, 4vw, 44px); }
    .cookie-settings p { margin: 0 0 16px; line-height: 1.6; color: rgba(255,255,255,.88); }
    .cookie-settings a { color: #fff; font-weight: 700; text-decoration: underline; }
    .cookie-settings a:hover,
    .cookie-settings a:focus-visible { color: #fff; text-decoration: underline; }
    .cookie-actions { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 24px; }
    .cookie-actions button { border-radius: 12px; border: 1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.08); color: #fff; padding: 12px 18px; font-weight: 600; cursor: pointer; }
    .cookie-actions button:hover { background: rgba(255,255,255,.16); }
  </style>
  <!-- Consent Mode defaults (load FIRST) -->
  <script src="/assets/js/consent-mode.js" defer></script>
  <!-- Google tag (gtag.js) — GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JLDG95NKGB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    // Respect Consent Mode v2 defaults. Do not send a page_view until ads/analytics are granted.
    // Initialize with denied-by-default values; our consent-mode.js will update these on accept.
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'analytics_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'wait_for_update': 500
    });

    // Basic GA4 bootstrap; send_page_view is false so we can gate by consent.
    gtag('js', new Date());
    gtag('config', 'G-JLDG95NKGB', { 'send_page_view': false });

    // When our banner calls acceptAll(), consent-mode.js should emit a consent update event.
    // Listen for that and then send a page_view once per load.
    (function(){
      var sent = false;
      function trySend() {
        if (sent) return;
        // Minimal check: analytics_storage granted
        var s = (window.__TTG_CONSENT_STATE__ || {}).analytics_storage;
        if (s === 'granted') {
          sent = true;
          gtag('event', 'page_view');
        }
      }
      window.addEventListener('ttg-consent-updated', trySend);
      // Also attempt once on load in case consent was already saved as granted.
      document.addEventListener('DOMContentLoaded', trySend);
    })();
  </script>

  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "fef22cbf19e3473db5ec987a8f3bf4f3"}'></script>
  <!-- End Cloudflare Web Analytics -->

  <!-- --- Google CMP (Funding Choices) START --- -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-9905718149811880?ers=1"></script>
  <script>
    // Required bootstrap per Google; signals CMP presence
    (function() {
      function signalGooglefcPresent() {
        if (!window.frames['googlefcPresent']) {
          if (document.body) {
            const iframe = document.createElement('iframe');
            iframe.style.cssText = 'display:none';
            iframe.name = 'googlefcPresent';
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <script>
    // IAB TCF v2.2 stub to allow __tcfapi interactions
    (function() {
      var TCF_LOCATOR_NAME = '__tcfapiLocator';
      var queue = [];
      var win = window;
      var cmpFrame;

      function addFrame() {
        if (!win.frames[TCF_LOCATOR_NAME]) {
          if (document.body) {
            cmpFrame = document.createElement('iframe');
            cmpFrame.style.cssText = 'display:none';
            cmpFrame.name = TCF_LOCATOR_NAME;
            document.body.appendChild(cmpFrame);
          } else {
            setTimeout(addFrame, 5);
          }
        }
      }

      function tcfAPIHandler() {
        var gdprApplies;
        var args = arguments;

        if (!args.length) {
          return queue;
        }

        if (args[0] === 'setGdprApplies') {
          gdprApplies = args[1];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        } else if (args[0] === 'ping') {
          var retr = {
            gdprApplies: gdprApplies,
            cmpLoaded: false,
            cmpStatus: 'stub'
          };
          if (typeof args[2] === 'function') {
            args[2](retr);
          }
        } else {
          queue.push(args);
        }
      }

      function postMessageEventHandler(event) {
        var msgIsString = typeof event.data === 'string';
        var json = {};

        try {
          json = msgIsString ? JSON.parse(event.data) : event.data;
        } catch (ignore) {}

        var payload = json.__tcfapiCall;

        if (payload) {
          window.__tcfapi(payload.command, payload.version, function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            event.source.postMessage(returnMsg, '*');
          }, payload.parameter);
        }
      }

      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    })();
  </script>
  <script defer src="/assets/js/ttg-cmp-consent-bridge.js"></script>
  <!-- --- Google CMP (Funding Choices) END --- -->
</head>
<body class="theme-light">
  <div id="site-nav"></div>
  <main class="cookie-settings" aria-labelledby="cookie-settings-title">
    <h1 id="cookie-settings-title">Cookie Settings</h1>
    <p>You can review and change your cookie consent choices for The Tank Guide at any time. Use the buttons below to reopen the cookie preferences banner or reset your saved selections.</p>
    <p>Essential cookies are required to run the site. Analytics and advertising cookies are optional and will only load if you grant consent.</p>
    <div class="cookie-actions">
      <button type="button" id="manage-preferences-btn">Manage preferences</button>
      <button type="button" id="reset-consent-btn">Reset consent</button>
    </div>
    <section id="do-not-sell" aria-labelledby="do-not-sell-heading">
      <h2 id="do-not-sell-heading">Do Not Sell or Share My Personal Information</h2>
      <p>
        The Tank Guide does not sell personal data. You can opt out of personalized advertising by using the
        <strong>Manage preferences</strong> button above or by emailing
        <a href="mailto:privacy@thetankguide.com">privacy@thetankguide.com</a> with the subject “Do Not Sell or Share.”
      </p>
      <p>
        We honor Global Privacy Control (GPC) signals and apply your consent choices across all browsers signed in with your
        account. For additional privacy questions, contact <a href="/contact-feedback.html">Contact &amp; Feedback</a>.
      </p>
    </section>
  </main>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    console.info('cookie-settings: DOM ready; wiring CMP controls');

    var manageBtn = document.getElementById('manage-preferences-btn');
    var resetBtn = document.getElementById('reset-consent-btn');

    function logAction(action, detail) {
      try {
        console.log('cookie-settings:', action, detail || '');
      } catch (err) {}
    }

    function openViaTcfApi() {
      try {
        if (typeof window.__tcfapi === 'function') {
          logAction('attempting __tcfapi displayConsentUi');
          window.__tcfapi('displayConsentUi', 2, function (success) {
            logAction('__tcfapi displayConsentUi callback', success);
          });
          return true;
        }
      } catch (err) {
        console.error('cookie-settings: __tcfapi call failed', err);
      }
      return false;
    }

    function openViaFundingChoices() {
      var api = window.googlefc || {};

      try {
        if (typeof api.showRevocationMessage === 'function') {
          logAction('opening Funding Choices revocation message');
          api.showRevocationMessage();
          return true;
        }
        if (typeof api.showConsent === 'function') {
          logAction('opening Funding Choices consent dialog');
          api.showConsent();
          return true;
        }
        if (api.callbackQueue) {
          api.callbackQueue.push(function () {
            openViaFundingChoices();
          });
          return true;
        }
      } catch (err) {
        console.error('cookie-settings: Funding Choices fallback failed', err);
      }

      logAction('Funding Choices API not available');
      return false;
    }

    function clearTcfStorage() {
      var patterns = [/^IABTCF_/i, /^euconsent/i, /^eupubconsent/i, /^googlefc/i];

      try {
        var keys = [];
        for (var i = 0; i < localStorage.length; i++) {
          keys.push(localStorage.key(i));
        }
        keys.forEach(function (key) {
          if (patterns.some(function (re) { return re.test(key); })) {
            logAction('removing localStorage key', key);
            localStorage.removeItem(key);
          }
        });
      } catch (err) {
        console.error('cookie-settings: error clearing localStorage', err);
      }

      var cookies = document.cookie ? document.cookie.split(';') : [];
      cookies.forEach(function (cookie) {
        var name = cookie.split('=')[0].trim();
        if (patterns.some(function (re) { return re.test(name); })) {
          logAction('clearing cookie', name);
          document.cookie = name + '=; Max-Age=0; path=/; SameSite=Lax;';
          document.cookie = name + '=; Max-Age=0; path=/; domain=.thetankguide.com; SameSite=Lax;';
        }
      });
    }

    function resetConsentMode() {
      var deniedState = {
        ad_storage: 'denied',
        analytics_storage: 'denied',
        ad_user_data: 'denied',
        ad_personalization: 'denied',
        functionality_storage: 'denied',
        security_storage: 'denied'
      };

      try {
        if (typeof gtag === 'function') {
          gtag('consent', 'update', deniedState);
          logAction('gtag consent reset to denied');
        }
      } catch (err) {
        console.error('cookie-settings: error updating consent mode', err);
      }
    }

    function handleManage(event) {
      if (event) {
        event.preventDefault();
        if (event.stopImmediatePropagation) event.stopImmediatePropagation();
      }

      if (openViaTcfApi()) return;
      openViaFundingChoices();
    }

    function handleReset(event) {
      if (event) {
        event.preventDefault();
        if (event.stopImmediatePropagation) event.stopImmediatePropagation();
      }

      clearTcfStorage();
      resetConsentMode();

      try {
        if (typeof window.__tcfapi === 'function') {
          window.__tcfapi('revokeAllChoices', 2, function (success) {
            logAction('__tcfapi revokeAllChoices callback', success);
          });
        }
      } catch (err) {
        console.error('cookie-settings: error revoking choices via __tcfapi', err);
      }

      try {
        if (window.googlefc && typeof window.googlefc.reset === 'function') {
          logAction('resetting Funding Choices state');
          window.googlefc.reset();
        }
      } catch (err) {
        console.error('cookie-settings: Funding Choices reset failed', err);
      }

      setTimeout(function () {
        logAction('reloading after consent reset');
        window.location.reload();
      }, 500);
    }

    if (manageBtn) {
      manageBtn.addEventListener('click', handleManage, { passive: false });
      logAction('manage preferences button wired');
    }

    if (resetBtn) {
      resetBtn.addEventListener('click', handleReset, { passive: false });
      logAction('reset consent button wired');
    }
  });
</script>
  <script src="/js/footer-loader.js?v=1.5.2" defer></script>
  <section class="legal-links" aria-label="Site legal links">
    <a href="/privacy-legal.html">Privacy Policy</a>
    <a href="/terms.html">Terms</a>
    <a href="/contact-feedback.html">Contact</a>
  </section>
  <noscript>
    <section class="legal-links" aria-label="Site legal links (noscript)">
      <a href="/privacy-legal.html">Privacy Policy</a>
      <a href="/terms.html">Terms</a>
      <a href="/contact-feedback.html">Contact</a>
    </section>
  </noscript>

  <div id="site-footer" data-footer-src="/footer.html?v=1.5.2"></div>
</body>
</html>
